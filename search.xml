<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>P5017 摆渡车(noip2018pjT3) 题解</title>
      <link href="/2019/10/08/P5017/"/>
      <url>/2019/10/08/P5017/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="https://www.luogu.org/problem/P5017" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>有$n$名同学要乘坐摆渡车从人大附中前往人民大学，第$i$位同学在第$t_i$ 分钟去 等车。只有一辆摆渡车在工作，但摆渡车容量可以视为无限大。摆渡车从人大附中出发、 把车上的同学送到人民大学、再回到人大附中（去接其他同学），这样往返一趟总共花费$m$分钟（同学上下车时间忽略不计）。摆渡车要将所有同学都送到人民大学。</p><p>凯凯很好奇，如果他能任意安排摆渡车出发的时间，那么这些同学的等车时间之和最小为多少呢？</p><p>注意：摆渡车回到人大附中后可以即刻出发。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个正整数 <em>n</em>,<em>m</em>，以一个空格分开，分别代表等车人数和摆渡车往返 一趟的时间。<br>第二行包含 <em>n</em> 个正整数，相邻两数之间以一个空格分隔，第 <em>i</em> 个非负整数$t_i$代 表第 <em>i</em> 个同学到达车站的时刻。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出一行，一个整数，表示所有同学等车时间之和的最小值（单位：分钟）。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5 5<br>11 13 1 5 5</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>4</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>把时间从小到大排序然后考虑比较暴力的想法,设$dp_{i,j}$为前面i个人在第$j$分钟全部被接走的最长等待时间,但是由于$t_i$很大所以考虑转化第二维为第i个人等待了$j$分钟时前i个人都被接走的最长等待时间。</p><p>用刷表法，枚举一个大于当前编号的k和一个不大于$min(m-1,t_{i+1}-t_{i})$的等待时间$j$，设第i+1个人到第k个人的总等待时间为$sumt$,可以得到转移方程：</p><p>$dp_{k,max(t_i+j+m-t[k],0)}=min(dp_{k,max(t_i+j+m-t[k],0)},dp_{i,j}+sumt)$</p><p>然后来求这个$sumt=\sum\limits_{x=i+1}^n(max(t_i+j+m-t[k],0)+t_k-t_x)$</p><p>式子展开后可得$sumt=(max(t_i+j+m-t[k],0)+t_k)*(k-i)-(sum_k-sum_i)$，带回原式就得到了整道题的转移方程:</p><p>$dp_{k,max(t_i+j+m-t[k],0)}=min(dp_{k,max(t_i+j+m-t[k],0)},dp_{i,j}+(max(t_i+j+m-t[k],0)+t_k)*(k-i)-(sum_k-sum_i))$</p><p>好像用斜率优化可解？如果有空的话回头复习斜率优化的时候会(gu)补(gu)上(gu).</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">505</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,sum[maxn],t[maxn],dp[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t[i]),sum[i]=sum[i<span class="number">-1</span>]+t[i];</span><br><span class="line">sort(t+<span class="number">1</span>,t+n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++)dp[i][j]=<span class="number">192608171</span>;</span><br><span class="line">dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">t[<span class="number">0</span>]=<span class="number">-89279123</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> maxt=min(m<span class="number">-1</span>,t[i+<span class="number">1</span>]-t[i]);<span class="comment">//到下一个人的最长等待时间 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=maxt;j++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> k=i+<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">dp[k][max(t[i]+j+m-t[k],<span class="number">0</span>)]=min(dp[k][max(t[i]+j+m-t[k],<span class="number">0</span>)],dp[i][j]+(max(t[i]+j+m-t[k],<span class="number">0</span>)+t[k])*(k-i)-(sum[k]-sum[i]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans=INT_MAX;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=m<span class="number">-1</span>;i++)ans=min(ans,dp[n][i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>群岛沉没</title>
      <link href="/2019/10/07/%E7%BE%A4%E5%B2%9B%E6%B2%89%E6%B2%A1/"/>
      <url>/2019/10/07/%E7%BE%A4%E5%B2%9B%E6%B2%89%E6%B2%A1/</url>
      
        <content type="html"><![CDATA[<h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>遥远的海中，有着风景秀美的Eolv群岛，岛上的居民们一直以来都在幸福快乐地生活着。可是，地壳运动打破了他们平静的生活——近期，火山觉醒，地震频发。最令居民们绝望的是，他们祖祖辈辈耕耘过的小岛，如今正在沉没。</p><p>不能坐以待毙！居民们成立了紧急行动队，测算出了群岛中各个小岛将会沉没的时间。接下来，他们要在小岛之间架设一些桥梁，以满足在特殊时期物资的运输需求。</p><p>已经知道，群岛中一共包括N座小岛。居民们以将会沉没的时间为序，从先到后将它们从1到N编号。由于距离和地形的限制，他们只可能在M对小岛间建立桥梁，建立每条桥梁所需代价也不尽相同。一座桥梁连接两个不同的小岛，而其中只要有一座沉没，这条桥梁就将不再被允许通行。</p><p>现在，你需要设计一份桥梁的建设方案，保证居民们时时刻刻都可以通过桥梁在任意两个仍未沉没的岛屿间通行，而使建造代价尽可能地小。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个正整数 N、M，分别表示群岛中小岛数量、可能建立的桥梁数量。</p><p>接下来M行，其中第i行包含3个整数Ai、Bi、Di，表示第i座桥梁连接着编号为Ai和Bi的两个小岛，建造它所需的代价为Di。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>若存在一种建造方案使得对于所有的时刻，居民们可在任意两个仍未沉没的小岛间通行，请输出1个整数，表示建造代价的最小值。</p><p>否则请输出「Salty!」，表示满足要求的建造方案不存在。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5 6<br>1 2 1<br>1 3 2<br>2 3 7<br>2 5 7<br>3 4 2<br>4 5 1</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>11</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>首先判断不能联通的情况，就是任意一个岛屿都不能建造与他相连的更大的编号的岛屿相连的桥梁，否则一定能连通，遍历每个点并判断与其相连的每一条边，取最小值即可，复杂度$O(m)$，注意编号为n的点特殊处理。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">priority_queue&lt; pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; q;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">200000</span>,maxm=<span class="number">1000000</span>;</span><br><span class="line"><span class="keyword">int</span> head[maxn],n,m,ver[maxm&lt;&lt;<span class="number">1</span>],Nxt[maxm&lt;&lt;<span class="number">1</span>],edge[maxm&lt;&lt;<span class="number">1</span>],deg[maxn],tot;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,edge[tot]=l,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0x7ffffff</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(ver[i]&lt;u)<span class="keyword">continue</span>;</span><br><span class="line">sum=min(sum,edge[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("sinkingislands.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("sinkingislands.out","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v,l;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;l);</span><br><span class="line">add(u,v,l);</span><br><span class="line"><span class="keyword">if</span>(u&gt;v)deg[v]+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> deg[u]+=<span class="number">1</span>;</span><br><span class="line">add(v,u,l);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(deg[i]==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Salty!"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)ans+=solve(i);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图论 </tag>
            
            <tag> 杂题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P2107 小Z的AK计划 题解</title>
      <link href="/2019/10/07/P2107/"/>
      <url>/2019/10/07/P2107/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="https://www.luogu.org/problem/P2107" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>在小Z的家乡，有机房一条街，街上有很多机房。每个机房里都有一万个人在切题。小Z刚刷完CodeChef，准备出来逛逛。</p><p>机房一条街有 n 个机房，第 i 个机房的坐标为 xi ，小Z的家坐标为 0。小Z在街上移动的速度为1，即从 x1 到 x2 所耗费的时间为 |x1 − x2|。 每个机房的学生数量不同，ACM 题目水平也良莠不齐。小Z到达第 i 个机房后，可以花 ti 的时间想题，然后瞬间 AK；当然，也可以过机房而不入。</p><p>小Z现在只有 m 个单位时间，之后他就该赶着去打 Codeforces 了。现在他想知道自己最多能在多少个机房 AK，希望你帮帮他。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个整数 n，m。</p><p>接下来 n 行，每行包含两个整数 xi，ti 。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>第一行包含一个整数，表示小Z最多能 AK 的机房数量。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>2 10<br>1 100<br>5 5</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1 </p><h4 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h4><p>对于 30% 的数据，n ≤ 20。<br>对于 60% 的数据，n ≤ 1000。<br>对于 100% 的数据，1 ≤ n ≤ 10^5，0 ≤ m，xi ≤ 10^18，0 ≤ ti ≤ 10^9。</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>反悔型的贪心。首先按照机房距离的从近至远排序，用一个大根堆记录当前已选的机房，然后用一个$sum_t$记录当前的总时间花销，对于一个机房，如果当前剩余时间能到达此机房并做完题，就将其加入堆中，若不能，则对选择此机房并抛弃大根堆中最大机房的时间谁更优，若更优则删去堆顶并加入当前元素，否则反之。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100005</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">ll m,sumt,now;</span><br><span class="line">priority_queue&lt; pair&lt;ll,ll&gt; &gt; q;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cpr</span>&#123;</span></span><br><span class="line">ll x;</span><br><span class="line">ll t;</span><br><span class="line">&#125;sz[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(cpr cp1,cpr cp2)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> cp1.x&lt;cp2.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%lld"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;sz[i].x,&amp;sz[i].t);</span><br><span class="line">sort(sz+<span class="number">1</span>,sz+n+<span class="number">1</span>,cmp);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(m-sumt-(sz[i].x-now)&gt;=sz[i].t)&#123;<span class="comment">//直接加进来 </span></span><br><span class="line">sumt+=(sz[i].x-now);</span><br><span class="line">sumt+=sz[i].t,now=sz[i].x;</span><br><span class="line">q.push(make_pair(sz[i].t,i));</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(!q.empty()&amp;&amp;(sumt-q.top().first+(sz[i].x-now)+sz[i].t&lt;sumt))&#123;</span><br><span class="line">sumt-=q.top().first;</span><br><span class="line">sumt+=sz[i].t,sumt+=(sz[i].x-now),now=sz[i].x;</span><br><span class="line">q.push(make_pair(sz[i].t,i));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,q.size());</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 贪心 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tyvj1617 Grape 题解</title>
      <link href="/2019/10/03/tyvj1617/"/>
      <url>/2019/10/03/tyvj1617/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="http://www.joyoi.cn/problem/tyvj-1617" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>fox来到了一排葡萄架下,葡萄架上有很多葡萄(n串),它想将一部分葡萄偷走.<br>    每串葡萄都有一个价值,当然,由于有酸有甜,葡萄的价值可能为正,也可能为负.<br>    当然,为了让农夫看不出来,fox规定,每k串葡萄中,它最多选b串,但是由于fox是比较贪心的,每连续k串葡萄中,它会最少选a串<br>    例如n=5 k=3 a=1 b=2时,在第1—第3串葡萄中,fox只能选1或2串,在第2—第4串葡萄中,fox也只能选1或2串.<br>    图1的选法是不合法的,因为2—4中选出了3串葡萄<br>    图2的选法也是不合法的,因为1—3中选出了0串葡萄<br>    而图3的选法是合法的.<br>    现在,fox要选出一些葡萄,而农夫得到剩余的葡萄,由于fox有嫉妒心理,希望让fox得到的价值减去农夫得到的价值的差值最大</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p> 第一行整数n,k,a,b<br> 第二行n个整数表示每串葡萄的价值</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>仅一行,表示答案</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>2 1 0 1<br>2 -2</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>4</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>n很大但是k很小，而k的状态很明显需要压缩表示</p><p>于是设$F_{i,k}$为前i串葡萄的最后k串葡萄状态为k时的最大美味值，转移方程时很明显每次把k左移一位并且通过与运算处理掉超出位数的1.</p><p>转移方程可得：</p><p>$F_{i+1,S&lt;&lt;1|1}=min(F_{i+1,S&lt;&lt;1|1},F_{i,S}+c_{i+1}),F_{i+1,S&lt;&lt;1}=min(F_{i+1,S&lt;&lt;1},F_{i,S} )$</p><p>由于有$a$和$b$的限制，所以需要预处理出一个状态是否合法</p><p>需要注意的时初始状态为$F_{0,i}(i&lt;=maxstate)=0$ 其中maxstate==$2^k-1$</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">int</span> n,k,a,b,w[<span class="number">10005</span>],maxstate;</span><br><span class="line">ll sum,ans,dp[<span class="number">10005</span>][<span class="number">1</span>&lt;&lt;<span class="number">11</span>];</span><br><span class="line"><span class="keyword">bool</span> ok[<span class="number">1</span>&lt;&lt;<span class="number">12</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">isok</span><span class="params">(<span class="keyword">int</span> S)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(S&amp;(<span class="number">1</span>&lt;&lt;(i<span class="number">-1</span>)))tot++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tot&gt;=a&amp;&amp;tot&lt;=b)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("grape.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("grape.out","w",stdout);</span></span><br><span class="line"><span class="built_in">memset</span>(ok,<span class="literal">false</span>,<span class="keyword">sizeof</span>(ok));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;n,&amp;k,&amp;a,&amp;b);</span><br><span class="line">maxstate=(<span class="number">1</span>&lt;&lt;k)<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;w[i]),sum+=w[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=maxstate;i++)&#123;</span><br><span class="line">ok[i]=isok(i);</span><br><span class="line"><span class="comment">//if(ok[i])printf("Yes: %d\n",i);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=maxstate;j++)dp[i][j]=<span class="number">-0x7ffffff</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=maxstate;i++)dp[<span class="number">0</span>][i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=maxstate;j++)&#123;</span><br><span class="line"><span class="keyword">int</span> S=(j&lt;&lt;<span class="number">1</span>)&amp;maxstate;</span><br><span class="line"><span class="keyword">if</span>(dp[i][j]!=<span class="number">-0x7ffffff</span>)&#123;</span><br><span class="line"><span class="comment">//printf("%d %d\n",i,j);</span></span><br><span class="line"><span class="comment">//printf("%d %d\n",dp[i][j]);</span></span><br><span class="line"><span class="keyword">if</span>(ok[S|<span class="number">1</span>]||i+<span class="number">1</span>&lt;k)dp[i+<span class="number">1</span>][S|<span class="number">1</span>]=max(dp[i+<span class="number">1</span>][S|<span class="number">1</span>],dp[i][j]+w[i+<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">if</span>(ok[S]||i+<span class="number">1</span>&lt;k)dp[i+<span class="number">1</span>][S]=max(dp[i+<span class="number">1</span>][S],dp[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans=<span class="number">-0x7ffffff</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=maxstate;i++)ans=max(ans,dp[n][i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans*<span class="number">2</span>-sum);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 状压dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模拟赛 水晶的排列 题解</title>
      <link href="/2019/09/28/9-21-T3/"/>
      <url>/2019/09/28/9-21-T3/</url>
      
        <content type="html"><![CDATA[<h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>给定 n 个水晶，第 i 个水晶的高度为 H i 。<br>现在要求将这些水晶排成一排，要求相邻两个水晶之间的高度差均大于 k，问有多少种排法。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行两个整数 n,k。<br>接下来 n 行，每行一个整数，第 i 行的整数表示 $H_i$。</p><a id="more"></a><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出一行一个整数表示排法的种类数。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>4 1<br>3<br>4<br>2<br>1</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>2</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>考虑进行状态压缩动态规划，设 F s,i 表示由集合 s 内的点排成一列，最后一个<br>是第 i 个水晶，合法的方案数。<br>那么我们显然只需枚举倒数第二个水晶 j，并保证两个水晶之间的高度差大于<br>k 就行了，余下的将转化为子问题。<br>转移方程为: $F_{s,i}=\sum_{j \in s,j\not= i}F_{s-{i},j}[|H_i-H_j|&gt;k]$<br>时间复杂度$O(n^22^n)$</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll n,k,maxstate,dp[(<span class="number">1</span>&lt;&lt;<span class="number">18</span>)<span class="number">-1</span>][<span class="number">20</span>],h[<span class="number">20</span>],ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("3.in","r",stdin);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;n,&amp;k);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;h[i]);</span><br><span class="line">maxstate=(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dp[<span class="number">1</span>&lt;&lt;(i<span class="number">-1</span>)][i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> s=<span class="number">1</span>;s&lt;=maxstate;s++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i==j)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>(h[i]-h[j])&gt;k&amp;&amp;(!((s&gt;&gt;(j<span class="number">-1</span>))&amp;<span class="number">1</span>)))dp[s|(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][j]+=dp[s][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)ans+=dp[maxstate][i];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 状压dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9_22_T3 模拟赛 遗迹净化 题解</title>
      <link href="/2019/09/26/9-22-T3/"/>
      <url>/2019/09/26/9-22-T3/</url>
      
        <content type="html"><![CDATA[<h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>不知几千年后，本应死去的遗迹，如今却迎来了客人。</p><p>拔起了圣剑的你，为追溯过往，从这里开始了冒险的旅程。进入遗迹后，利用探知术，你得知了遗迹中包括入口处在内共有N个探索点，它们由M条双向通道相连通，通道的长度不尽相同。由于遗迹已在地下尘封多年，通道里都充满着污秽。你需要先净化掉所有的污秽，才能迈出探索的脚步。</p><p>从遗迹入口开始，将N个探索点从1到N编号。首先，你可以使用神圣驱魔术，净化以你为中心的一定区域内的所有道路。即，消耗数值为C×X的魔力点（C为常数），选定一个非负整数距离X。对于一条通道，若其两端的探索点与1号探索点间的距离均不大于X，则这条通道将被净化。这里，两探索点i与j间的距离定义为从i到j需经通道的长度之和的最小值。之后，你需要分别净化其余的所有通道，净化一条通道所需消耗魔力点即为这条通道的长度。</p><p>请确定净化的方式，使你需要消耗魔力点的数值最小。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含三个正整数 N、M、C，分别表示遗迹中探索点数量、通道数量和与使用神圣净化术时消耗魔力点数值有关的常数。</p><p>接下来M行，其中第i行包含3个整数Ai、Bi、Di，表示第i条通道连接着编号为Ai和Bi的两个探索点，长度为Di。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>请输出1个整数，表示你需要消耗魔力点的最小值。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5 5 2<br>2 3 1<br>3 1 2<br>2 4 3<br>1 2 4<br>2 5 5</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>14</p><h4 id="数据规模与约定"><a href="#数据规模与约定" class="headerlink" title="数据规模与约定"></a>数据规模与约定</h4><p>对于32%的数据，N&lt;=100，M &lt;= 200，C &lt;= 100；Di &lt;= 10．<br>对于64%的数据，N&lt;=100，M&lt;=4000<br>对于100%的数据，2 &lt;= N &lt;= 100000，1 &lt;= M &lt;= 200000，1 &lt;= C &lt;= 100000；<br>1 &lt;= Ai、Bi &lt;= N，Ai ≠ Bi，1 &lt;= Di &lt;= 100000两个探索点间直接连接的通道不超过一条。</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>简化题意：让你找一个距离，到一条边的距离（定义为两个点当中距离更大的那个点的最短距离）比该距离短的边可以用一个费用一次性全部净化，其他的边全部要手动净化</p><p>首先需要跑一遍最短路，处理出1号点到每个点的最短路，然后遍历所有的边，每条边两个点取最大值，然后按这个最大值给所有边排序，同时预处理出一个前缀和$sum_c$为需要净化的费用总和，然后在数组中寻找最小值断点更新答案即可.</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100005</span>,maxm=<span class="number">200005</span>;</span><br><span class="line">ll ans,sumc,n,m,c,tot,head[maxn],ver[maxm&lt;&lt;<span class="number">1</span>],edge[maxm&lt;&lt;<span class="number">1</span>],Nxt[maxm&lt;&lt;<span class="number">1</span>],dis[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line">priority_queue&lt; pair&lt;ll,ll&gt; &gt; q;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">ll cost;</span><br><span class="line">ll dist;</span><br><span class="line">&#125;xl[maxm];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ed</span>&#123;</span></span><br><span class="line">ll u;</span><br><span class="line">ll v;</span><br><span class="line">ll l;</span><br><span class="line">&#125;E[maxm];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(ll u,ll v,ll l)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,edge[tot]=l,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node cp1,node cp2)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> cp1.dist&lt;cp2.dist;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dis[i]=<span class="number">0x7ffffff</span>;</span><br><span class="line">q.push(make_pair(<span class="number">0</span>,<span class="number">1</span>));</span><br><span class="line">dis[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="comment">//printf("Yes\n");</span></span><br><span class="line"><span class="keyword">int</span> u=q.top().second;q.pop();</span><br><span class="line"><span class="keyword">if</span>(vis[u])<span class="keyword">continue</span>;</span><br><span class="line">vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="comment">//printf("%lld\n",u);</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> ll i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="comment">//printf("%lld\n",ver[i]);</span></span><br><span class="line"><span class="keyword">if</span>(dis[ver[i]]&gt;dis[u]+edge[i])</span><br><span class="line">dis[ver[i]]=dis[u]+edge[i],q.push(make_pair(-dis[ver[i]],ver[i]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("vestige.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("vestige.out","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lld%lld%lld"</span>,&amp;n,&amp;m,&amp;c);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">ll u,v,l;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lld%lld%lld"</span>,&amp;u,&amp;v,&amp;l);</span><br><span class="line"><span class="comment">//printf("%lld %lld %lld\n",u,v,l);</span></span><br><span class="line">E[i].u=u,E[i].v=v,E[i].l=l;sumc+=l;</span><br><span class="line">add(u,v,l);add(v,u,l);</span><br><span class="line">&#125;</span><br><span class="line">dijkstra();</span><br><span class="line"><span class="comment">//for(register int i=1;i&lt;=n;i++)printf("%lld\n",dis[i]);</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)xl[i].cost=E[i].l,xl[i].dist=max(dis[E[i].u],dis[E[i].v]);</span><br><span class="line">sort(xl+<span class="number">1</span>,xl+m+<span class="number">1</span>,cmp);</span><br><span class="line">ans=sumc;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">sumc-=xl[i].cost,ans=min(ans,<span class="number">1L</span>L*c*xl[i].dist+sumc); </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld %lld\n"</span>,xl[i].dist,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路 </tag>
            
            <tag> dijkstra </tag>
            
            <tag> 图论 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9_22_T2 模拟赛 排干净月潭水塘 题解</title>
      <link href="/2019/09/22/9-22-T2/"/>
      <url>/2019/09/22/9-22-T2/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>净月潭公园里有n个水塘，因为要做OIER们的宿营地，需要把这n个水塘中的水排干，水塘中的水在自然条件下1个单位的时间可以蒸发A升水。现在买了1台抽水机，使用抽水机可以让你用1个单位的时间使每个水塘除开自然蒸发的A升水外，还可抽B升水，但在1个单位的时间内只能对1个水塘使用。</p><p>要你求出排干所有水塘的最少时间（水塘中的水为0时为排干）。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行N，A，B；</p><p>接下来N行，a1,a2,…aN每行一个数，表示每个水塘中水的升数。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>一行一个整数，表示排干所有水塘的最少时间。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3 2 1<br>1<br>2<br>3</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1</p><h4 id="数据规模与约定"><a href="#数据规模与约定" class="headerlink" title="数据规模与约定"></a>数据规模与约定</h4><p>对于10%数据：N ≤ 5，1&lt;=ai,A,B&lt;=10<br>对于40%数据：N ≤ 5000，1&lt;=ai,A,B&lt;=5000<br>对于100%数据：N ≤ 500000，1&lt;=ai,A,B&lt;=500000</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>看数据范围应该能想到二分，二分一个总时间$mid$，然后只要一个水池超过该时间就全力去抽，最后判断时间是否合法。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500005</span>;</span><br><span class="line"><span class="keyword">int</span> ans,mid,l,r,n,A,B;</span><br><span class="line"><span class="keyword">int</span> sz[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;<span class="comment">//×ÜÊ±¼ä </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">if</span>(x*A&lt;sz[i])res+=(sz[i]-x*A+B<span class="number">-1</span>)/B;</span><br><span class="line"><span class="keyword">if</span>(res&lt;=x)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("dry.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("dry.out","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;A,&amp;B);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]),r=max(r,sz[i]/A);</span><br><span class="line">l=<span class="number">1</span>,r+=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(check(mid))&#123;</span><br><span class="line">r=mid<span class="number">-1</span>;</span><br><span class="line">ans=mid;</span><br><span class="line">&#125;<span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>qu</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二分答案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9.22模拟赛 二十四点 题解</title>
      <link href="/2019/09/22/9-22-T1/"/>
      <url>/2019/09/22/9-22-T1/</url>
      
        <content type="html"><![CDATA[<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>给定n个数，不能改变顺序，可以再中间添加加号、减号或乘号，求有多少种算式可以算出24。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行一个正整数n。<br>接下来n行每行一个整数，第i行表示第i个数。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>一行一个整数，输出满足条件的算式个数。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5<br>10<br>2<br>4<br>2<br>4</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>5</p><h4 id="数据规模"><a href="#数据规模" class="headerlink" title="数据规模"></a>数据规模</h4><p>对于10%的数据，n=2<br>对于40%的数据，n&lt;=5<br>对于100%的数据，n&lt;=10</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>很明显是一个深搜，不用剪枝就能过，但是要注意不能从pos=0开始乘和减。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,sz[<span class="number">15</span>],fac[<span class="number">15</span>],sum[<span class="number">15</span>],ans;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("%d %d\n",pos,now);</span></span><br><span class="line"><span class="comment">//if(now&gt;24&amp;&amp;sum[n]-sum[pos]&lt;now-24)return;</span></span><br><span class="line"><span class="comment">//if(now&lt;24&amp;&amp;sum[n]-sum[pos]&lt;24-now)return;</span></span><br><span class="line"><span class="comment">//printf("Yes\n");</span></span><br><span class="line"><span class="keyword">if</span>(pos==n)&#123;</span><br><span class="line"><span class="keyword">if</span>(now==<span class="number">24</span>)&#123;</span><br><span class="line"><span class="comment">//printf("Yes\n");</span></span><br><span class="line">ans++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res=sz[pos+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=pos+<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">res*=sz[i];</span><br><span class="line">dfs(i,now+res);</span><br><span class="line"><span class="keyword">if</span>(pos!=<span class="number">0</span>)dfs(i,now-res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(pos!=<span class="number">0</span>)dfs(pos+<span class="number">1</span>,now-sz[pos+<span class="number">1</span>]);</span><br><span class="line">dfs(pos+<span class="number">1</span>,now+sz[pos+<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">freopen(<span class="string">"z24a.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">freopen(<span class="string">"z24a.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">fac[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]),sum[i]=sum[i<span class="number">-1</span>]+sz[i];</span><br><span class="line">dfs(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>poj3268 奶牛农场 题解</title>
      <link href="/2019/09/22/poj3268/"/>
      <url>/2019/09/22/poj3268/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="http://poj.org/problem?id=3268" target="_blank" rel="noopener">传送门</a></p><h4 id="Description-题目描述"><a href="#Description-题目描述" class="headerlink" title="Description 题目描述"></a>Description 题目描述</h4><p>One cow from each of <em>N</em> farms (1 ≤ <em>N</em> ≤ 1000) conveniently numbered 1..<em>N</em> is going to attend the big cow party to be held at farm #<em>X</em> (1 ≤ <em>X</em> ≤ <em>N</em>). A total of <em>M</em> (1 ≤ <em>M</em> ≤ 100,000) unidirectional (one-way roads connects pairs of farms; road <em>i</em> requires <em>Ti</em> (1 ≤ <em>Ti</em> ≤ 100) units of time to traverse.</p><p>Each cow must walk to the party and, when the party is over, return to her farm. Each cow is lazy and thus picks an optimal route with the shortest time. A cow’s return route might be different from her original route to the party since roads are one-way.</p><p>Of all the cows, what is the longest amount of time a cow must spend walking to the party and back?</p><a id="more"></a><h5 id="题意简述"><a href="#题意简述" class="headerlink" title="题意简述"></a>题意简述</h5><p>题意简述：有N个农场，编号为1到N，用M条单向道路连接，其中通过第i条道路所需的时间是Ti。</p><p>现在所有农场中的牛都要走到X号农场(1&lt;=X&lt;=N)开派对，并在派对后返回自己的农场。当然，去的路和回来的路可能不同，因为路是单向的。</p><p>每头牛都很懒，他们会选择消耗时间总和最短的路径来走。求所有牛在路上花费的时间的最大值。</p><h4 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h4><p>Line 1: Three space-separated integers, respectively: <em>N</em>, <em>M</em>, and <em>X</em><br>Lines 2..<em>M</em>+1: Line <em>i</em>+1 describes road <em>i</em> with three space-separated integers: <em>Ai</em>, <em>Bi</em>, and <em>Ti</em>. The described road runs from farm <em>Ai</em> to farm <em>Bi</em>, requiring <em>Ti</em> time units to traverse.</p><h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><p>Line 1: One integer: the maximum of time any one cow must walk.</p><h4 id="Sample-Input-样例输入"><a href="#Sample-Input-样例输入" class="headerlink" title="Sample Input 样例输入"></a>Sample Input 样例输入</h4><p>4 8 2<br>1 2 4<br>1 3 2<br>1 4 7<br>2 1 1<br>2 3 5<br>3 1 2<br>3 4 4<br>4 2 3</p><h4 id="Sample-Output-样例输出"><a href="#Sample-Output-样例输出" class="headerlink" title="Sample Output 样例输出"></a>Sample Output 样例输出</h4><p>10</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>由于道路不是双向的，所以去和回的最短路是不同的。</p><p>回去的最短路明显是从排队地点处理一遍dis，那么来的路处理一次，然后变为反图再跑一次就好了。</p><p>然后遍历更新答案即可。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1005</span>,maxm=<span class="number">10005</span>;</span><br><span class="line">priority_queue&lt; pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; q;</span><br><span class="line"><span class="keyword">int</span> ans,dis[maxn],n,m,x,head[maxn],ver[maxm&lt;&lt;<span class="number">1</span>],edge[maxm&lt;&lt;<span class="number">1</span>],Nxt[maxm&lt;&lt;<span class="number">1</span>],tot;</span><br><span class="line"><span class="keyword">int</span> dis_2[maxn],head_2[maxn],ver_2[maxm&lt;&lt;<span class="number">1</span>],edge_2[maxm&lt;&lt;<span class="number">1</span>],Nxt_2[maxm&lt;&lt;<span class="number">1</span>],tot_2;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn],vis_2[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,Nxt[tot]=head[u],edge[tot]=l,head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_2</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">ver_2[++tot_2]=v,Nxt_2[tot_2]=head_2[u],edge_2[tot_2]=l,head_2[u]=tot_2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dis[i]=<span class="number">192608171</span>;</span><br><span class="line">dis[x]=<span class="number">0</span>;</span><br><span class="line">q.push(make_pair(<span class="number">0</span>,x));</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> u=q.top().second;q.pop();</span><br><span class="line"><span class="keyword">if</span>(vis[u])<span class="keyword">continue</span>;</span><br><span class="line">vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">int</span> v=ver[i];</span><br><span class="line"><span class="keyword">if</span>(dis[v]&gt;dis[u]+edge[i])&#123;dis[v]=dis[u]+edge[i];q.push(make_pair(-dis[v],v));&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dijkstra_2</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dis_2[i]=<span class="number">192608171</span>;</span><br><span class="line">dis_2[x]=<span class="number">0</span>;</span><br><span class="line">q.push(make_pair(<span class="number">0</span>,x));</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> u=q.top().second;q.pop();</span><br><span class="line"><span class="keyword">if</span>(vis_2[u])<span class="keyword">continue</span>;</span><br><span class="line">vis_2[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head_2[u];i;i=Nxt_2[i])&#123;</span><br><span class="line"><span class="keyword">int</span> v=ver_2[i];</span><br><span class="line"><span class="keyword">if</span>(dis_2[v]&gt;dis_2[u]+edge_2[i])&#123;dis_2[v]=dis_2[u]+edge_2[i];q.push(make_pair(-dis_2[v],v));&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("party.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("party.out","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;x);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v,l;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;l);</span><br><span class="line">add(u,v,l);add_2(v,u,l);</span><br><span class="line">&#125;</span><br><span class="line">dijkstra();</span><br><span class="line">dijkstra_2();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">ans=max(ans,dis[i]+dis_2[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路 </tag>
            
            <tag> dijkstra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P4821 [中山市选]生成树 题解</title>
      <link href="/2019/09/22/P4821/"/>
      <url>/2019/09/22/P4821/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="https://www.luogu.org/problem/P4821" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>有一种图形叫做五角形圈。一个五角形圈的中心有1个由n个顶点和n条边组成的圈。在中心的这个n边圈的每一条边同时也是某一个五角形的一条边，一共有n个不同的五角形。这些五角形只在五角形圈的中心的圈上有公共的顶点。如图0所示是一个4-五角形圈。</p><p><img src="https://miao.su/images/2019/09/22/clip_image001a31b1.png" alt="如图所示"></p><p>现在给定一个n五角形圈，你的任务就是求出n五角形圈的不同生成树的数目。还记得什么是图的生成树吗？一个图的生成树是保留原图的所有顶点以及顶点的数目减去一这么多条边,从而生成的一棵树。</p><p>由于这样的生成树数目可能过多，你只需要输出答案对2007的模数即可。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>输入包含多组测试数据。第一行包含一个正整数T，表示测试数据数目。每组测试数据包含一个整数n( 2&lt;=N&lt;=100)，代表你需要求解的五角形圈中心的边数。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>对每一组测试数据，输出一行包含一个整数x，表示n五角形圈的生成树数目模2007之后的结果。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>1<br>2</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>40</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>很明显需要断$n-1$条边，然后打表看看$n=2$和$n=3$的情况，会发现需要断正多边形上的边然后其中一个五边形要再再删去一条边，且这条边必须要在中心圈上，于是根据乘法原理即为$4<em>n</em>5^{n-1}$。快速幂即可。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">2007</span>;</span><br><span class="line">ll n,ans,T;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">power</span><span class="params">(ll a,ll b)</span></span>&#123;</span><br><span class="line">ll res=<span class="number">1L</span>L;</span><br><span class="line"><span class="keyword">while</span>(b)&#123;<span class="keyword">if</span>(b&amp;<span class="number">1</span>)(res*=a%mod)%=mod;(a*=a%mod)%=mod;b&gt;&gt;=(<span class="number">1L</span>L);&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;T);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> xh=<span class="number">1</span>;xh&lt;=T;xh++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,<span class="number">4L</span>L*n%mod*power(<span class="number">5</span>,n<span class="number">-1</span>)%mod);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂题 </tag>
            
            <tag> 结论题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>codevs2370 小机房的树 题解</title>
      <link href="/2019/09/20/codevs2370/"/>
      <url>/2019/09/20/codevs2370/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="http://codevs.cn/problem/2370/" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述-Description"><a href="#题目描述-Description" class="headerlink" title="题目描述 Description"></a><strong>题目描述</strong> Description</h4><p>小机房有棵焕狗种的树，树上有N个节点，节点标号为0到N-1，有两只虫子名叫飘狗和大吉狗，分居在两个不同的节点上。有一天，他们想爬到一个节点上去搞基，但是作为两只虫子，他们不想花费太多精力。已知从某个节点爬到其父亲节点要花费 c 的能量（从父亲节点爬到此节点也相同），他们想找出一条花费精力最短的路，以使得搞基的时候精力旺盛，他们找到你要你设计一个程序来找到这条路，要求你告诉他们最少需要花费多少精力</p><a id="more"></a><h4 id="输入描述-Input-Description"><a href="#输入描述-Input-Description" class="headerlink" title="输入描述 Input Description"></a><strong>输入描述</strong> Input Description</h4><p>第一行一个n，接下来n-1行每一行有三个整数u，v, c 。表示节点 u 爬到节点 v 需要花费 c 的精力。第n+1行有一个整数m表示有m次询问。接下来m行每一行有两个整数 u ，v 表示两只虫子所在的节点</p><h4 id="输出描述-Output-Description"><a href="#输出描述-Output-Description" class="headerlink" title="输出描述 Output Description"></a><strong>输出描述</strong> Output Description</h4><p>一共有m行，每一行一个整数，表示对于该次询问所得出的最短距离。</p><h4 id="样例输入-Sample-Input"><a href="#样例输入-Sample-Input" class="headerlink" title="样例输入 Sample Input"></a>样例输入 Sample Input</h4><p>3</p><p>1 0 1</p><p>2 0 1</p><p>3</p><p>1 0</p><p>2 0</p><p>1 2</p><h4 id="样例输出-Sample-Output"><a href="#样例输出-Sample-Output" class="headerlink" title="样例输出 Sample Output"></a><strong>样例输出</strong> Sample Output</h4><p>1</p><p>1</p><p>2</p><h4 id="数据范围及提示-Data-Size-amp-Hint"><a href="#数据范围及提示-Data-Size-amp-Hint" class="headerlink" title="数据范围及提示 Data Size &amp; Hint"></a><strong>数据范围及提示</strong> Data Size &amp; Hint</h4><p>1&lt;=n&lt;=50000， 1&lt;=m&lt;=75000， 0&lt;=c&lt;=1000</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>LCA的一个性质:树上任意两点间的最短距离长度等于他们两个到树根的距离减去两倍LCA到树根的距离.</p><p>于是利用这个性质,求出LCA后直接回答即可.</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500005</span>,maxm=<span class="number">500005</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> edge[maxn],dis[maxn],dep[maxn],tot,f[maxn][<span class="number">20</span>],lg[maxn],head[maxn],ver[maxm&lt;&lt;<span class="number">1</span>],Nxt[maxm&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,edge[tot]=l,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line">f[u][<span class="number">0</span>]=fa,dep[u]=dep[fa]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=dep[u];i++)f[u][i]=f[f[u][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])<span class="keyword">if</span>(ver[i]!=fa)dis[ver[i]]=dis[u]+edge[i],dfs(ver[i],u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[u]&lt;dep[v])swap(u,v);</span><br><span class="line"><span class="keyword">while</span>(dep[u]&gt;dep[v])u=f[u][lg[dep[u]-dep[v]]<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">if</span>(u==v)<span class="keyword">return</span> u;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=lg[dep[u]]<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)<span class="keyword">if</span>(f[u][i]!=f[v][i])u=f[u][i],v=f[v][i];</span><br><span class="line"><span class="keyword">return</span> f[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;<span class="keyword">int</span> u,v,l;<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;l);u+=<span class="number">1</span>,v+=<span class="number">1</span>,add(u,v,l),add(v,u,l);&#125;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)lg[i]=lg[i<span class="number">-1</span>]+(<span class="number">1</span>&lt;&lt;lg[i<span class="number">-1</span>]==i);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;<span class="keyword">int</span> u,v;<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);u+=<span class="number">1</span>,v+=<span class="number">1</span>;<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dis[u]+dis[v]<span class="number">-2</span>*dis[lca(u,v)]);&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LCA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51nod1674 区间的价值V2 题解</title>
      <link href="/2019/09/19/51nod1674/"/>
      <url>/2019/09/19/51nod1674/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="http://www.51nod.com/Challenge/Problem.html#problemId=1674" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>lyk拥有一个区间。</p><p>它规定一个区间的价值为这个区间中所有数and起来的值与这个区间所有数or起来的值的乘积。</p><p>例如3个数2,3,6。它们and起来的值为2，or起来的值为7，这个区间对答案的贡献为2*7=14。</p><p>现在lyk有一个n个数的序列，它想知道所有n*(n+1)/2个区间的贡献的和对1000000007取模后的结果是多少。</p><p>例如当这个序列为{3,4,5}时，那么区间[1,1],[1,2],[1,3],[2,2],[2,3],[3,3]的贡献分别为9,0,0,16,20,25。</p><a id="more"></a><h4 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h4><p>第一行一个数n(1&lt;=n&lt;=100000)。<br>接下来一行n个数ai，表示这n个数(0&lt;=ai&lt;=10^9)。</p><h4 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h4><p>仅一行表示答案</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3<br>3 4 5</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>70</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>由于与运算和或运算都具有收敛性：即参与运算的数越多结果则越靠拢0或1，那么我们就可以对离散化的答案开一个map，然后对一个区间进行分治，然后将相同的答案累计个数并乘起来即可，注意取模的位置。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>  maxn=<span class="number">100005</span>;</span><br><span class="line">ll sz[maxn],n,AND[maxn],OR[maxn],ans;</span><br><span class="line"><span class="built_in">map</span>&lt;pair&lt;ll,ll&gt;,ll&gt; mp,mp2;</span><br><span class="line"><span class="built_in">map</span>&lt;pair&lt;ll,ll&gt;,ll&gt;::iterator it,it2;<span class="comment">//第一维为与，第二维为或</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("%d %d\n",L,R);</span></span><br><span class="line"><span class="keyword">if</span>(L&gt;R)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">mp.clear(),mp2.clear();</span><br><span class="line">AND[mid]=sz[mid],OR[mid]=sz[mid],mp[make_pair(sz[mid],sz[mid])]++,mp2[make_pair(sz[mid],sz[mid])]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=mid<span class="number">-1</span>;i&gt;=L;i--)AND[i]=AND[i+<span class="number">1</span>]&amp;sz[i],OR[i]=OR[i+<span class="number">1</span>]|sz[i],mp[make_pair(AND[i],OR[i])]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=mid+<span class="number">1</span>;i&lt;=R;i++)  AND[i]=AND[i<span class="number">-1</span>]&amp;sz[i],OR[i]=OR[i<span class="number">-1</span>]|sz[i],mp2[make_pair(AND[i],OR[i])]++;</span><br><span class="line"><span class="keyword">for</span>(it=mp.begin();it!=mp.end();it++)<span class="keyword">for</span>(it2=mp2.begin();it2!=mp2.end();it2++)ans=(ans+((*it).first.first&amp;(*it2).first.first)*((*it).first.second|(*it2).first.second)%mod*(*it).second*(*it2).second)%mod;</span><br><span class="line">solve(L,mid<span class="number">-1</span>);solve(mid+<span class="number">1</span>,R);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;sz[i]);</span><br><span class="line">solve(<span class="number">1</span>,n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分治 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>poj1125 Stockbroker Grapevine 题解</title>
      <link href="/2019/09/19/poj1125/"/>
      <url>/2019/09/19/poj1125/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="http://poj.org/problem?id=1125" target="_blank" rel="noopener">传送门</a></p><h4 id="Description-题目描述"><a href="#Description-题目描述" class="headerlink" title="Description 题目描述"></a>Description 题目描述</h4><p>Stockbrokers are known to overreact to rumours. You have been contracted to develop a method of spreading disinformation amongst the stockbrokers to give your employer the tactical edge in the stock market. For maximum effect, you have to spread the rumours in the fastest possible way.</p><p>Unfortunately for you, stockbrokers only trust information coming from their “Trusted sources” This means you have to take into account the structure of their contacts when starting a rumour. It takes a certain amount of time for a specific stockbroker to pass the rumour on to each of his colleagues. Your task will be to write a program that tells you which stockbroker to choose as your starting point for the rumour, as well as the time it will take for the rumour to spread throughout the stockbroker community. This duration is measured as the time needed for the last person to receive the information.</p><a id="more"></a><h4 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h4><p>Your program will input data for different sets of stockbrokers. Each set starts with a line with the number of stockbrokers. Following this is a line for each stockbroker which contains the number of people who they have contact with, who these people are, and the time taken for them to pass the message to each person. The format of each stockbroker line is as follows: The line starts with the number of contacts (n), followed by n pairs of integers, one pair for each contact. Each pair lists first a number referring to the contact (e.g. a ‘1’ means person number one in the set), followed by the time in minutes taken to pass a message to that person. There are no special punctuation symbols or spacing rules.</p><p>Each person is numbered 1 through to the number of stockbrokers. The time taken to pass the message on will be between 1 and 10 minutes (inclusive), and the number of contacts will range between 0 and one less than the number of stockbrokers. The number of stockbrokers will range from 1 to 100. The input is terminated by a set of stockbrokers containing 0 (zero) people.</p><h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><p>For each set of data, your program must output a single line containing the person who results in the fastest message transmission, and how long before the last person will receive any given message after you give it to this person, measured in integer minutes.<br>It is possible that your program will receive a network of connections that excludes some persons, i.e. some people may be unreachable. If your program detects such a broken network, simply output the message “disjoint”. Note that the time taken to pass the message from person A to person B is not necessarily the same as the time taken to pass it from B to A, if such transmission is possible at all.</p><h4 id="Sample-Input-样例输入"><a href="#Sample-Input-样例输入" class="headerlink" title="Sample Input 样例输入"></a>Sample Input 样例输入</h4><p>3<br>2 2 4 3 5<br>2 1 2 3 6<br>2 1 2 2 2<br>5<br>3 4 4 2 8 5 3<br>1 5 8<br>4 1 6 4 10 2 7 5 2<br>0<br>2 2 5 1 5<br>0</p><h4 id="Sample-Output-样例输出"><a href="#Sample-Output-样例输出" class="headerlink" title="Sample Output 样例输出"></a>Sample Output 样例输出</h4><p>3 2<br>3 10</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>题意简述:有n个人,他们要以最快速度互相传递一个消息,现在已知每个人可以传递的人及传递时间,求能用最短时间传递完信息的1那个人</p><p>n小于100,然后根据题意可知答案是一个能将消息传递给其他所有人且传递最长时间最短的人,于是跑一遍floyd然后$\mathcal O(n^2)$统计即可得出答案.</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,f[<span class="number">105</span>][<span class="number">105</span>],ans,pos;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)f[i][j]=<span class="number">192608171</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)f[i][i]=<span class="number">0</span>;</span><br><span class="line">ans=<span class="number">0x7ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">f[i][j]=min(f[i][j],f[i][k]+f[k][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> tmp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> vis=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[i][j]==<span class="number">192608171</span>)&#123;vis=<span class="literal">true</span>;<span class="keyword">break</span>;&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(f[i][j]&gt;tmp)tmp=f[i][j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(vis)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(tmp&lt;ans)&#123;ans=tmp,pos=i;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)&amp;&amp;n)&#123;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> m;<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;<span class="keyword">int</span> tmp,l;<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;tmp,&amp;l),f[i][tmp]=min(f[i][tmp],l);&#125;</span><br><span class="line">floyd();</span><br><span class="line">solve();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,pos,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路 </tag>
            
            <tag> floyd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>poj2481 Cows 题解</title>
      <link href="/2019/09/18/poj2481/"/>
      <url>/2019/09/18/poj2481/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="http://poj.org/problem?id=2481" target="_blank" rel="noopener">传送门</a></p><h4 id="Description-问题描述"><a href="#Description-问题描述" class="headerlink" title="Description 问题描述"></a>Description 问题描述</h4><p> Farmer John’s cows have discovered that the clover growing along the ridge of the hill (which we can think of as a one-dimensional number line) in his field is particularly good.</p><p>Farmer John has N cows (we number the cows from 1 to N). Each of Farmer John’s N cows has a range of clover that she particularly likes (these ranges might overlap). The ranges are defined by a closed interval [S,E].</p><p>But some cows are strong and some are weak. Given two cows: cowi and cowj, their favourite clover range is [Si, Ei] and [Sj, Ej]. If Si &lt;= Sj and Ej &lt;= Ei and Ei - Si &gt; Ej - Sj, we say that cowi is stronger than cowj.</p><p>For each cow, how many cows are stronger than her? Farmer John needs your help!  </p><a id="more"></a><h4 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h4><p>The input contains multiple test cases.<br>For each test case, the first line is an integer N (1 &lt;= N &lt;= 105), which is the number of cows. Then come N lines, the i-th of which contains two integers: S and E(0 &lt;= S &lt; E &lt;= 105) specifying the start end location respectively of a range preferred by some cow. Locations are given as distance from the start of the ridge.</p><p>The end of the input contains a single 0.  </p><h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><p>For each test case, output one line containing n space-separated integers, the i-th of which specifying the number of cows that are stronger than $cow_i$.</p><h4 id="Sample-Input-样例输入"><a href="#Sample-Input-样例输入" class="headerlink" title="Sample Input 样例输入"></a>Sample Input 样例输入</h4><p>3<br>1 2<br>0 3<br>3 4<br>0</p><h4 id="Sample-Output-样例输出"><a href="#Sample-Output-样例输出" class="headerlink" title="Sample Output 样例输出"></a>Sample Output 样例输出</h4><p>1 0 0</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>题意简述：一头奶牛能吃区间$[l,r]$的草，如果任意一头奶牛的这个范围在另一头奶牛的这个范围之内（重合除外），那么我们就说另一头奶牛更强壮，求出比每一头奶牛强壮的奶牛的数量。</p><p>我们可以根据每个奶牛的区间的左端点排序，因为对于任意一个比它强的奶牛，左端点必定是在他左边的。然后对着坐标轴开一个树状数组，统计右端点到最大坐标间的奶牛个数，记录原始下标即可得到答案。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">14</span>;</span><br><span class="line"><span class="keyword">int</span> n,c[maxn],ans[maxn],lst;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cow</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> l;</span><br><span class="line"><span class="keyword">int</span> r;</span><br><span class="line"><span class="keyword">int</span> xb;</span><br><span class="line">&#125;sz[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(cow cp1,cow cp2)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(cp1.l==cp2.l)<span class="keyword">return</span> cp1.r&gt;cp2.r;</span><br><span class="line"><span class="keyword">return</span> cp1.l&lt;cp2.l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(;x&lt;=<span class="number">1e5</span>+<span class="number">1</span>;x+=x&amp;-x)c[x]+=val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(;x&gt;<span class="number">0</span>;x-=x&amp;-x)res+=c[x];</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)==<span class="number">1</span>&amp;&amp;n)&#123;</span><br><span class="line">lst=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="keyword">sizeof</span>(c));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)sz[i].xb=i,<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;sz[i].l,&amp;sz[i].r),sz[i].l+=<span class="number">1</span>,sz[i].r+=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//for(register int i=1;i&lt;=n;i++)printf("%d %d\n",sz[i].l,sz[i].r);</span></span><br><span class="line">sort(sz+<span class="number">1</span>,sz+n+<span class="number">1</span>,cmp);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="comment">//printf("xb:%d\n",sz[i].xb);</span></span><br><span class="line"><span class="keyword">int</span> tmp=ask(<span class="number">1e5</span>+<span class="number">1</span>)-ask(sz[i].r<span class="number">-1</span>);</span><br><span class="line">add(sz[i].r,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(sz[i].r==sz[i<span class="number">-1</span>].r&amp;&amp;sz[i].l==sz[i<span class="number">-1</span>].l)&#123;ans[sz[i].xb]=lst;<span class="keyword">continue</span>;&#125;</span><br><span class="line">ans[sz[i].xb]=tmp,lst=tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[i]);</span><br><span class="line"><span class="keyword">if</span>(i!=n)<span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树状数组 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P3155 [CQOI2009]叶子的染色 题解</title>
      <link href="/2019/09/15/P3155/"/>
      <url>/2019/09/15/P3155/</url>
      
        <content type="html"><![CDATA[<h4 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h4><p><a href="https://www.luogu.org/problem/P3155" target="_blank" rel="noopener">传送门</a></p><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>给一棵m个结点的无根树，你可以选择一个度数大于1的结点作为根，然后给一些结点（根、内部结点和叶子均可）着以黑色或白色。你的着色方案应该保证根结点到每个叶子的简单路径上都至少包含一个有色结点（哪怕是这个叶子本身）。 对于每个叶结点u，定义c[u]为从根结点从U的简单路径上最后一个有色结点的颜色。给出每个c[u]的值，设计着色方案，使得着色结点的个数尽量少。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个正整数m, n，其中n是叶子的个数，m是结点总数。结点编号为1，2，…，m，其中编号1，2，… ，n是叶子。以下n行每行一个0或1的整数（0表示黑色，1表示白色），依次为c[1]，c[2]，…，c[n]。以下m-1行每行两个整数a，b（1&lt;=a &lt; b &lt;= m），表示结点a和b 有边相连。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>仅一个数，即着色结点数的最小值。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5 3<br>0<br>1<br>0<br>1 4<br>2 5<br>4 5<br>3 5</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>2</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>基本的树形dp，设$f_{u,i}$为以$u$ 根节点的子树所需染色的最小节点数</p><p>发现对于一个节点只有白色，黑色，无色三种情况</p><p>于是就可以得到三个转移方程：</p><p>$f_{u,0}=min(f_{u,2},f_{u,0}-1,f_{u,1})$</p><p>$f_{u,1}=min(f_{u,2},f_{u,0},f_{u,1}-1)$</p><p>$f_{u,2}=min(f_{u,2},f_{u,0},f_{u,1})$</p><p>($v \in son[s]$)</p><p>然后dfs即可。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm=<span class="number">10005</span>*<span class="number">2</span>,inf=<span class="number">1000000000</span>;</span><br><span class="line"><span class="keyword">int</span> deg[maxm],root,c[maxm],head[maxm],ver[maxm],Nxt[maxm],tot;</span><br><span class="line"><span class="keyword">int</span> f[maxm][<span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("dfs:%d %d\n",u,fa);</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(ver[i]==fa)<span class="keyword">continue</span>;</span><br><span class="line">dfs(ver[i],u);</span><br><span class="line"><span class="keyword">int</span> v=ver[i];</span><br><span class="line">f[u][<span class="number">0</span>]+=min(f[v][<span class="number">2</span>],min(f[v][<span class="number">1</span>],f[v][<span class="number">0</span>]<span class="number">-1</span>));</span><br><span class="line">f[u][<span class="number">1</span>]+=min(f[v][<span class="number">2</span>],min(f[v][<span class="number">1</span>]<span class="number">-1</span>,f[v][<span class="number">0</span>]));</span><br><span class="line">f[u][<span class="number">2</span>]+=min(f[v][<span class="number">2</span>],min(f[v][<span class="number">1</span>],f[v][<span class="number">0</span>]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&lt;=n)f[i][c[i]]=<span class="number">1</span>,f[i][!c[i]]=inf,f[i][<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span>f[i][<span class="number">0</span>]=<span class="number">1</span>,f[i][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("leaf.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("leaf.out","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;m,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;m;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</span><br><span class="line"><span class="comment">//printf("%d %d\n",u,v);</span></span><br><span class="line">add(u,v);add(v,u);</span><br><span class="line">deg[u]++,deg[v]++;</span><br><span class="line"><span class="keyword">if</span>(deg[u]&gt;<span class="number">1</span>&amp;&amp;!root)&#123;</span><br><span class="line">root=u;</span><br><span class="line"><span class="comment">//printf("uYes");</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(deg[v]&gt;<span class="number">1</span>&amp;&amp;!root)&#123;</span><br><span class="line">root=v;</span><br><span class="line"><span class="comment">//printf("vYes%d\n",deg[4]);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">init();</span><br><span class="line">dfs(root,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,min(f[root][<span class="number">2</span>],min(f[root][<span class="number">1</span>],f[root][<span class="number">0</span>])));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树形dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P1627 [CQOI2009]中位数 题解</title>
      <link href="/2019/09/15/P1627/"/>
      <url>/2019/09/15/P1627/</url>
      
        <content type="html"><![CDATA[<h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>给出1~n的一个排列，统计该排列有多少个长度为奇数的连续子序列的中位数是b。中位数是指把所有元素从小到大排列后，位于中间的数。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行为两个正整数n和b，第二行为1~n的排列。</p><p>【数据规模】<br>对于30%的数据中，满足n≤100；<br>对于60%的数据中，满足n≤1000；<br>对于100%的数据中，满足n≤100000,1≤b≤n。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出一个整数，即中位数为b的连续子序列个数。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>7 4<br>5 7 2 4 3 1 6</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>4</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>由于此题给出的数列是一个全排列，考虑把大于b的数转换为1，小于b的数转换为0，那么满足题意的数就是包含b的一段和为0的连续子序列，所以我们可以在一开始就找到中位数b所在的位置，然后向前向后扫，设$cntl_i$和$cntr_i$分别表示左边与右边前缀和为$i$的子序列的个数，那么答案就是$\sum_{i=-n+1}^n cntl_i*cntr_{0-i}$</p><p>因为下表不能表示负数，所以把前缀和全部加上n即可。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100005</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,sz[maxn],idx,suml[maxn*<span class="number">2</span>],sumr[maxn*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("median.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("median.out","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]);</span><br><span class="line"><span class="keyword">if</span>(sz[i]==m)idx=i;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(sz[i]&gt;m)sz[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> sz[i]=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">suml[n]=sumr[n]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=idx<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)sum+=sz[i],suml[sum+n]++;</span><br><span class="line">sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=idx+<span class="number">1</span>;i&lt;=n;i++)sum+=sz[i],sumr[sum+n]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=-n+<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)ans+=suml[i+n]*sumr[<span class="number">0</span>-i+n];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P4157 [SCOI2006]整数划分 题解</title>
      <link href="/2019/09/15/P4157/"/>
      <url>/2019/09/15/P4157/</url>
      
        <content type="html"><![CDATA[<h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>从文件中读入一个正整数n（10≤n≤31000）。要求将n写成若干个正整数之和，并且使这些正整数的乘积最大。</p><p>例如，n=13，则当n表示为4+3+3+3（或2+2+3+3+3）时，乘积=108为最大。</p><a id="more"></a><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>只有一个正整数：n （10≤n≤31000）</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>第1行输出一个整数，为最大乘积的位数。</p><p>第2行输出最大乘积的前100位，如果不足100位，则按实际位数输出最大乘积。</p><p>（提示：在给定的范围内，最大乘积的位数不超过5000位）。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>13</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>3<br>108</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>可以证明，任意数分解成2和3都比其他数更优.<br>假设说我们把一个数分解为比2和3更大的数，那么很明显的他能得到的乘积会更小。<br>于是就优先分3,然后不断减小，直到不大于5.<br>然后在5范围以内，可以知道4拆分成2+2更优<br>加特判即可。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">1000005</span>],tot,n;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Nxt</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++)ans[i+<span class="number">1</span>]+=(ans[i]/<span class="number">10</span>),ans[i]%=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">while</span>(ans[tot+<span class="number">1</span>]!=<span class="number">0</span>)tot++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">multi</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=tot;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">ans[i]*=x;</span><br><span class="line">&#125;</span><br><span class="line">Nxt();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("integer.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("integer.out","w",stdout);</span></span><br><span class="line">ans[<span class="number">1</span>]=<span class="number">1</span>,tot=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line"><span class="keyword">while</span>(n&gt;<span class="number">5</span>)&#123;n-=<span class="number">3</span>;multi(<span class="number">3</span>);&#125;</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">5</span>)multi(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(n==<span class="number">4</span>)multi(<span class="number">4</span>);</span><br><span class="line"><span class="keyword">else</span>multi(n);</span><br><span class="line">Nxt();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,tot);</span><br><span class="line"><span class="keyword">if</span>(tot&lt;=<span class="number">100</span>)<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=tot;i&gt;=<span class="number">1</span>;i--)<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[i]);</span><br><span class="line"><span class="keyword">else</span><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=tot;i&gt;=tot<span class="number">-100</span>+<span class="number">1</span>;i--)<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 高精度 </tag>
            
            <tag> 数论 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hzu2105 Digits Count 题解</title>
      <link href="/2019/09/11/hzu2105/"/>
      <url>/2019/09/11/hzu2105/</url>
      
        <content type="html"><![CDATA[<h4 id="Problem-Description-问题描述"><a href="#Problem-Description-问题描述" class="headerlink" title="Problem Description 问题描述"></a>Problem Description 问题描述</h4><p>Given N integers A={A[0],A[1],…,A[N-1]}. Here we have some operations:</p><p><strong>Operation 1:</strong> AND opn L R</p><p>Here opn, L and R are integers.</p><p>For L≤i≤R, we do A[i]=A[i] AND opn (here “AND” is bitwise operation).</p><p><strong>Operation 2:</strong> OR opn L R</p><p>Here opn, L and R are integers.</p><p>For L≤i≤R, we do A[i]=A[i] OR opn (here “OR” is bitwise operation).</p><p><strong>Operation 3:</strong> XOR opn L R</p><p>Here opn, L and R are integers.</p><p>For L≤i≤R, we do A[i]=A[i] XOR opn (here “XOR” is bitwise operation).</p><p><strong>Operation 4:</strong> SUM L R</p><p>We want to know the result of A[L]+A[L+1]+…+A[R].</p><p>Now can you solve this easy problem?</p><h4 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h4><p>The first line of the input contains an integer T, indicating the number of test cases. (T≤100)</p><p>Then T cases, for any case, the first line has two integers n and m (1≤n≤1,000,000, 1≤m≤100,000), indicating the number of elements in A and the number of operations.</p><p>Then one line follows n integers A[0], A[1], …, A[n-1] (0≤A[i]&lt;16,0≤i&lt;n).</p><p>Then m lines, each line must be one of the 4 operations above. (0≤opn≤15)</p><h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><p>For each test case and for each “SUM” operation, please output the result with a single line.</p><h4 id="Sample-Input-样例输入"><a href="#Sample-Input-样例输入" class="headerlink" title="Sample Input 样例输入"></a>Sample Input 样例输入</h4><p>1<br>4 4<br>1 2 4 7<br>SUM 0 2<br>XOR 5 0 0<br>OR 6 0 3<br>SUM 0 2</p><h4 id="Sample-Output-样例输出"><a href="#Sample-Output-样例输出" class="headerlink" title="Sample Output 样例输出"></a>Sample Output 样例输出</h4><p>7<br>18</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>位运算的线段树。我们发现，由于opt&lt;16，所以可以开四棵线段树来记录每一位上的情况，同时标记也只有两种：区间置换和区间取反，注意的是两种标记下推时要相互处理消除影响。</p><p>最后求和分开统计即可。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> T,n,m,sz[maxn],val[<span class="number">5</span>][maxn*<span class="number">4</span>],lazy[<span class="number">5</span>][maxn*<span class="number">4</span>],XOR[<span class="number">5</span>][maxn*<span class="number">4</span>];</span><br><span class="line"><span class="comment">//Segementree</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line">val[id][now]=val[id][now&lt;&lt;<span class="number">1</span>]+val[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> now,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(lazy[id][now]!=<span class="number">-1</span>)&#123;</span><br><span class="line">lazy[id][now&lt;&lt;<span class="number">1</span>]=lazy[id][now],lazy[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=lazy[id][now];</span><br><span class="line">val[id][now&lt;&lt;<span class="number">1</span>]=lazy[id][now]?(mid-l+<span class="number">1</span>):<span class="number">0</span>,val[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=lazy[id][now]?(r-mid):<span class="number">0</span>;</span><br><span class="line">lazy[id][now]=<span class="number">-1</span>,XOR[id][now]=<span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(XOR[id][now])&#123;</span><br><span class="line">val[id][now&lt;&lt;<span class="number">1</span>]=(mid-l+<span class="number">1</span>)-val[id][now&lt;&lt;<span class="number">1</span>],val[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=(r-mid)-val[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">XOR[id][now&lt;&lt;<span class="number">1</span>]^=XOR[id][now],XOR[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]^=XOR[id][now],XOR[id][now]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(lazy[id][now&lt;&lt;<span class="number">1</span>]!=<span class="number">-1</span>)lazy[id][now&lt;&lt;<span class="number">1</span>]^=<span class="number">1</span>,XOR[id][now&lt;&lt;<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(lazy[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]!=<span class="number">-1</span>)lazy[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]^=<span class="number">1</span>,XOR[id][now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("%d %d %d\n",l,r,now);</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4</span>;i++)&#123;</span><br><span class="line"><span class="comment">//printf("%d %d\n",i,now);</span></span><br><span class="line">lazy[i][now]=<span class="number">-1</span>,XOR[i][now]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> id=<span class="number">1</span>;id&lt;=<span class="number">4</span>;id++)&#123;</span><br><span class="line"><span class="comment">//printf("%d\n",val[id][now]);</span></span><br><span class="line"><span class="keyword">if</span>((sz[l]&amp;(<span class="number">1</span>&lt;&lt;(id<span class="number">-1</span>))))val[id][now]=<span class="number">1</span>;<span class="keyword">else</span> val[id][now]=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//printf("%d %d %d %d\n",l,val[id][now],id,now);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,now&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> id=<span class="number">1</span>;id&lt;=<span class="number">4</span>;id++)pushup(id,now);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> now,<span class="keyword">int</span> opt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l&lt;=L&amp;&amp;R&lt;=r)&#123;</span><br><span class="line"><span class="keyword">if</span>(opt==<span class="number">1</span>)&#123;</span><br><span class="line">val[id][now]=((R-L+<span class="number">1</span>)-val[id][now]);</span><br><span class="line">XOR[id][now]=XOR[id][now]^<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(lazy[id][now]!=<span class="number">-1</span>)lazy[id][now]^=<span class="number">1</span>,XOR[id][now]=<span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(opt==<span class="number">2</span>)&#123;</span><br><span class="line">val[id][now]=<span class="number">0</span>;</span><br><span class="line">lazy[id][now]=<span class="number">0</span>;</span><br><span class="line">XOR[id][now]=<span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(opt==<span class="number">3</span>)&#123;</span><br><span class="line">val[id][now]=(R-L+<span class="number">1</span>);</span><br><span class="line">lazy[id][now]=<span class="number">1</span>;</span><br><span class="line">XOR[id][now]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(id,now,L,R);</span><br><span class="line"><span class="keyword">if</span>(l&lt;=mid)change(id,L,mid,l,r,now&lt;&lt;<span class="number">1</span>,opt);</span><br><span class="line"><span class="keyword">if</span>(r&gt;mid)change(id,mid+<span class="number">1</span>,R,l,r,now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,opt);</span><br><span class="line">pushup(id,now);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("%d %d\n",l,r);</span></span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l&lt;=L&amp;&amp;R&lt;=r)<span class="keyword">return</span> val[id][now];</span><br><span class="line">pushdown(id,now,L,R);</span><br><span class="line"><span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(l&lt;=mid)res+=query(id,l,r,L,mid,now&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(r&gt;mid)res+=query(id,l,r,mid+<span class="number">1</span>,R,now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"> <span class="comment">//pushup(id,now);</span></span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("test.txt","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("2.txt","w",stdout);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line"><span class="comment">//printf("at:%d\n",val[4][4]);</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> xh=<span class="number">1</span>;xh&lt;=T;xh++)&#123;</span><br><span class="line"><span class="comment">//printf("at:%d\n",val[4][4])</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]);</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="comment">//printf("Yes\n");</span></span><br><span class="line"><span class="keyword">char</span> ch;</span><br><span class="line"><span class="keyword">int</span> qry,l,r;</span><br><span class="line"><span class="keyword">while</span>((ch=getchar())&amp;&amp;(ch&lt;<span class="string">'A'</span>||ch&gt;<span class="string">'Z'</span>));</span><br><span class="line"><span class="keyword">if</span>(ch==<span class="string">'S'</span>)&#123;</span><br><span class="line"><span class="keyword">while</span>((ch=getchar())&amp;&amp;ch&gt;=<span class="string">'A'</span>&amp;&amp;ch&lt;=<span class="string">'Z'</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);</span><br><span class="line">l+=<span class="number">1</span>,r+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> id=<span class="number">1</span>;id&lt;=<span class="number">4</span>;id++)&#123;</span><br><span class="line"><span class="comment">//printf("id:%d %d\n",id,query(id,l,r,1,n,1));</span></span><br><span class="line">ans+=((<span class="number">1</span>&lt;&lt;(id<span class="number">-1</span>))*query(id,l,r,<span class="number">1</span>,n,<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'O'</span>)&#123;<span class="comment">//OR</span></span><br><span class="line"><span class="keyword">while</span>((ch=getchar())&amp;&amp;ch&gt;=<span class="string">'A'</span>&amp;&amp;ch&lt;=<span class="string">'Z'</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;qry,&amp;l,&amp;r);</span><br><span class="line">l+=<span class="number">1</span>,r+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> id=<span class="number">1</span>;id&lt;=<span class="number">4</span>;id++)&#123;</span><br><span class="line"><span class="keyword">if</span>(qry&amp;(<span class="number">1</span>&lt;&lt;(id<span class="number">-1</span>)))&#123;</span><br><span class="line">change(id,<span class="number">1</span>,n,l,r,<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'X'</span>)&#123;<span class="comment">//XOR</span></span><br><span class="line"><span class="keyword">while</span>((ch=getchar())&amp;&amp;ch&gt;=<span class="string">'A'</span>&amp;&amp;ch&lt;=<span class="string">'Z'</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;qry,&amp;l,&amp;r);</span><br><span class="line">l+=<span class="number">1</span>,r+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> id=<span class="number">1</span>;id&lt;=<span class="number">4</span>;id++)&#123;</span><br><span class="line"><span class="keyword">if</span>(qry&amp;(<span class="number">1</span>&lt;&lt;(id<span class="number">-1</span>)))&#123;</span><br><span class="line">change(id,<span class="number">1</span>,n,l,r,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'A'</span>)&#123;<span class="comment">//AND</span></span><br><span class="line"><span class="keyword">while</span>((ch=getchar())&amp;&amp;ch&gt;=<span class="string">'A'</span>&amp;&amp;ch&lt;=<span class="string">'Z'</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;qry,&amp;l,&amp;r);</span><br><span class="line">l+=<span class="number">1</span>,r+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> id=<span class="number">1</span>;id&lt;=<span class="number">4</span>;id++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!(qry&amp;(<span class="number">1</span>&lt;&lt;(id<span class="number">-1</span>))))&#123;</span><br><span class="line">change(id,<span class="number">1</span>,n,l,r,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线段树 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CF292D Connected Components 题解</title>
      <link href="/2019/09/10/CF292D/"/>
      <url>/2019/09/10/CF292D/</url>
      
        <content type="html"><![CDATA[<h5 id="Problem-Description-问题描述"><a href="#Problem-Description-问题描述" class="headerlink" title="Problem Description 问题描述"></a>Problem Description 问题描述</h5><p>We already know of the large corporation where Polycarpus works as a system administrator. The computer network there consists of <em>n</em> computers and <em>m</em> cables that connect some pairs of computers. In other words, the computer network can be represented as some non-directed graph with <em>n</em> nodes and <em>m</em> edges. Let’s index the computers with integers from 1 to <em>n</em>, let’s index the cables with integers from 1 to <em>m</em>.</p><p>Polycarpus was given an important task — check the reliability of his company’s network. For that Polycarpus decided to carry out a series of <em>k</em> experiments on the computer network, where the <em>i</em>-th experiment goes as follows:</p><ol><li>Temporarily disconnect the cables with indexes from $l_i$ to $r_i$, inclusive (the other cables remain connected).</li><li>Count the number of connected components in the graph that is defining the computer network at that moment.</li><li>Re-connect the disconnected cables with indexes from $l_i$ to $r_i$ (that is, restore the initial network).</li></ol><p>Help Polycarpus carry out all experiments and for each print the number of connected components in the graph that defines the computer network through the given experiment. Isolated vertex should be counted as single component.</p><a id="more"></a><h5 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h5><p>The first line contains two space-separated integers $n, m (2 ≤ n ≤ 500; 1 ≤ m ≤ 10^4)$ — the number of computers and the number of cables, correspondingly. </p><p>The following m lines contain the cables’ description. The i-th line contains space-separated pair of integers $x_i, y_i (1 ≤ x_i, y_i ≤ n; xi ≠ y_i)$ — the numbers of the computers that are connected by the i-th cable. Note that a pair of computers can be connected by multiple cables.</p><p>The next line contains integer $k (1 ≤ k ≤ 2·10^4)$ — the number of experiments. Next k lines contain the experiments’ descriptions. The i-th line contains space-separated integers $l_i, r_i (1 ≤ l_i ≤ r_i ≤ m)$ — the numbers of the cables that Polycarpus disconnects during the i-th experiment.</p><h5 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h5><p>Print $k$ numbers, the i-th number represents the number of connected components of the graph that defines the computer network during the i-th experiment.</p><h5 id="Sample-Input-样例输入"><a href="#Sample-Input-样例输入" class="headerlink" title="Sample Input 样例输入"></a>Sample Input 样例输入</h5><p>6 5<br>1 2<br>5 4<br>2 3<br>3 1<br>3 6<br>6<br>1 3<br>2 5<br>1 5<br>5 5<br>2 4<br>3 3</p><h5 id="Sample-Output-样例输出"><a href="#Sample-Output-样例输出" class="headerlink" title="Sample Output 样例输出"></a>Sample Output 样例输出</h5><p>4<br>5<br>6<br>3<br>4<br>2</p><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>由于本题的$n$很小,所以我们可以开一个前缀并查集$pre$和一个后缀并查集$suf$,对于每次查询,我们只要对前缀的$1,l-1$部分和后缀的$r+1,m$部分手动合并即可.</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm=<span class="number">10005</span>;</span><br><span class="line"><span class="keyword">int</span> x[<span class="number">10005</span>],y[<span class="number">10005</span>],n,m,k,pre[<span class="number">10005</span>][<span class="number">505</span>],suf[<span class="number">10005</span>][<span class="number">505</span>],fa[<span class="number">505</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//UnionFind</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get1</span><span class="params">(<span class="keyword">int</span> sz,<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> (x==pre[sz][x])?x:pre[sz][x]=get1(sz,pre[sz][x]);&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get2</span><span class="params">(<span class="keyword">int</span> sz,<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> (x==suf[sz][x])?x:suf[sz][x]=get2(sz,suf[sz][x]);&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get3</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> (x==fa[x])?x:fa[x]=get3(fa[x]);&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">merge1</span><span class="params">(<span class="keyword">int</span> sz,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="keyword">if</span>(x!=y)pre[sz][x]=y;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">merge2</span><span class="params">(<span class="keyword">int</span> sz,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="keyword">if</span>(x!=y)suf[sz][x]=y;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">merge3</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="keyword">if</span>(x!=y)fa[x]=y;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">pre[<span class="number">0</span>][i]=i,suf[m+<span class="number">1</span>][i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x[i],&amp;y[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)pre[i][j]=pre[i<span class="number">-1</span>][j];</span><br><span class="line">merge1(i,get1(i,x[i]),get1(i,y[i]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=m;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)suf[i][j]=suf[i+<span class="number">1</span>][j];</span><br><span class="line">merge2(i,get2(i,x[i]),get2(i,y[i]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*for(register int i=1;i&lt;=m;i++)&#123;</span></span><br><span class="line"><span class="comment">for(register int j=1;j&lt;=n;j++)printf("%d ",pre[i][j]);</span></span><br><span class="line"><span class="comment">printf("\n");</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">for(register int i=m;i&gt;=1;i--)&#123;</span></span><br><span class="line"><span class="comment">for(register int j=1;j&lt;=n;j++)printf("%d ",suf[i][j]);</span></span><br><span class="line"><span class="comment">printf("\n");</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)fa[i]=pre[l<span class="number">-1</span>][i];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)merge3(get3(i),get3(get2(r+<span class="number">1</span>,i)));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">if</span>(get3(fa[i])==i)ans++;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 并查集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P2279[HNOI2003]消防局的设立 题解</title>
      <link href="/2019/09/04/P2279/"/>
      <url>/2019/09/04/P2279/</url>
      
        <content type="html"><![CDATA[<h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>2020年，人类在火星上建立了一个庞大的基地群，总共有n个基地。起初为了节约材料，人类只修建了n-1条道路来连接这些基地，并且每两个基地都能够通过道路到达，所以所有的基地形成了一个巨大的树状结构。如果基地A到基地B至少要经过d条道路的话，我们称基地A到基地B的距离为d。</p><p>由于火星上非常干燥，经常引发火灾，人类决定在火星上修建若干个消防局。消防局只能修建在基地里，每个消防局有能力扑灭与它距离不超过2的基地的火灾。</p><p>你的任务是计算至少要修建多少个消防局才能够确保火星上所有的基地在发生火灾时，消防队有能力及时扑灭火灾。</p><a id="more"></a><h5 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h5><p>输入文件名为input.txt。</p><p>输入文件的第一行为n （n&lt;=1000），表示火星上基地的数目。接下来的n-1行每行有一个正整数，其中文件第i行的正整数为a[i]，表示从编号为i的基地到编号为a[i]的基地之间有一条道路，为了更加简洁的描述树状结构的基地群，有a[i]&lt;i。</p><h5 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h5><p>输出文件名为output.txt</p><p>输出文件仅有一个正整数，表示至少要设立多少个消防局才有能力及时扑灭任何基地发生的火灾。</p><h5 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h5><p>6<br>1<br>2<br>3<br>5</p><h5 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h5><p>2</p><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>标算是树形dp然而可以用贪心搞……嫌时间不够就暂时用贪心苟着。</p><p>考虑任意一个节点$node_i$，假如它能被处理，那么一定是他的爷爷，他的父亲节点，他的兄弟节点，他的儿子节点，他的孙子节点当中的任意一个部署有消防站。而很显然部署一个在他的爷爷的位置可以解决他和他兄弟，于是贪心的做法就是每次找出未被处理的深度最深的点，然后标记它的爷爷即可。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1005</span>;</span><br><span class="line"><span class="keyword">int</span> ans,fa[maxn],dep[maxn],n,head[maxn],ver[maxn&lt;&lt;<span class="number">1</span>],Nxt[maxn&lt;&lt;<span class="number">1</span>],tot;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line">priority_queue&lt; pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; pq;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("%d %d\n",u,f);</span></span><br><span class="line">dep[u]=dep[f]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(ver[i]==f)<span class="keyword">continue</span>;</span><br><span class="line">fa[ver[i]]=u;</span><br><span class="line">dfs(ver[i],u);</span><br><span class="line">&#125;</span><br><span class="line">pq.push(make_pair(dep[u],u));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">deal</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">int</span> tmp=ver[i];</span><br><span class="line"><span class="comment">//if(tmp==fa[u])continue;</span></span><br><span class="line">vis[tmp]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=head[tmp];j;j=Nxt[j]) vis[ver[j]]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> tmp;<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmp);</span><br><span class="line">add(i+<span class="number">1</span>,tmp),add(tmp,i+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(!pq.empty())&#123;</span><br><span class="line"><span class="keyword">while</span>(!pq.empty()&amp;&amp;vis[pq.top().second])pq.pop();</span><br><span class="line"><span class="keyword">if</span>(pq.empty())<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">int</span> u=pq.top().second;pq.pop();</span><br><span class="line">ans++;</span><br><span class="line"><span class="keyword">int</span> ls;</span><br><span class="line"><span class="keyword">if</span>(fa[fa[u]]) ls=fa[fa[u]];<span class="keyword">else</span>  ls=<span class="number">1</span>;</span><br><span class="line">deal(ls);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树形dp </tag>
            
            <tag> 贪心 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P1119 灾后重建 题解</title>
      <link href="/2019/09/03/P1119/"/>
      <url>/2019/09/03/P1119/</url>
      
        <content type="html"><![CDATA[<h5 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h5><p><em>B</em>地区在地震过后，所有村庄都造成了一定的损毁，而这场地震却没对公路造成什么影响。但是在村庄重建好之前，所有与未重建完成的村庄的公路均无法通车。换句话说，只有连接着两个重建完成的村庄的公路才能通车，只能到达重建完成的村庄。</p><a id="more"></a><h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>给出<em>B</em>地区的村庄数N，村庄编号从0到$N-1$，和所有<em>M</em>条公路的长度，公路是双向的。并给出第$i$个村庄重建完成的时间$t_i$，你可以认为是同时开始重建并在第$t_i$天重建完成，并且在当天即可通车。若$t_i$为0则说明地震未对此地区造成损坏，一开始就可以通车。之后有<em>Q</em>个询问(<em>x</em>,<em>y</em>,<em>t</em>)，对于每个询问你要回答在第<em>t</em>天，从村庄<em>x</em>到村庄y的最短路径长度为多少。如果无法找到从x村庄到y村庄的路径，经过若干个已重建完成的村庄，或者村庄<em>x</em>或村庄<em>y</em>在第t天仍未重建完成 ，则需要返回$-1$。</p><h5 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h5><p>第一行包含两个正整数<em>N</em>,<em>M</em>，表示了村庄的数目与公路的数量。</p><p>第二行包含<em>N</em>个非负整数$t_i$，表示了每个村庄重建完成的时间，数据保证了t单调递增。</p><p>接下来<em>M</em>行，每行3个非负整数<em>i</em>,<em>j</em>,<em>w</em>，<em>w</em>为不超过10000的正整数，表示了有一条连接村庄i<em>i</em>与村庄j<em>j</em>的道路，长度为<em>w</em>，保证<em>i</em>≠<em>j</em>，且对于任意一对村庄只会存在一条道路。</p><p>接下来一行也就是<em>M</em>+3行包含一个正整数<em>Q</em>，表示<em>Q</em>个询问。</p><p>接下来<em>Q</em>行，每行3个非负整数<em>x</em>,<em>y</em>,<em>t</em>，询问在第$t$天，从村庄<em>x</em>到村庄<em>y</em>的最短路径长度为多少，数据保证了<em>t</em>是不下降的。</p><h5 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h5><p>共<em>Q</em>行，对每一个询问(<em>x</em>,<em>y</em>,<em>t</em>)输出对应的答案，即在第<em>t</em>天，从村庄<em>x</em>到村庄<em>y</em>的最短路径长度为多少。如果在第t天无法找到从<em>x</em>村庄到<em>y</em>村庄的路径，经过若干个已重建完成的村庄，或者村庄x或村庄<em>y</em>在第<em>t</em>天仍未修复完成，则输出−1。</p><h5 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h5><p>4 5<br>1 2 3 4<br>0 2 1<br>2 3 1<br>3 1 2<br>2 1 4<br>0 3 5<br>4<br>2 0 2<br>0 1 2<br>0 1 3<br>0 1 4</p><h5 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h5><p>-1<br>-1<br>5<br>4</p><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>由于时间具有单调不下降的性质，因此我们可以不断更新最短路</p><p>但是每次用dijkstra和spfa肯定会超时，考虑floyd,我们每次重建完成的村庄的序号是不下降的，回顾floyd的dp阶段，是以$k$个点作为阶段。</p><p>于是每当一个村庄重建完成后就把该阶段的答案更新即可。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> Q,n,m,f[<span class="number">205</span>][<span class="number">205</span>],Ti[<span class="number">205</span>],bj;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">205</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">floyd</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//printf("k:%d\n",k);</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[i][j]&gt;f[i][k]+f[k][j])f[j][i]=f[i][j]=f[i][k]+f[k][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;Ti[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)f[j][i]=f[i][j]=<span class="number">99999999</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)f[i][i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v,w;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">u+=<span class="number">1</span>,v+=<span class="number">1</span>;</span><br><span class="line">f[u][v]=f[v][u]=w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;Q);</span><br><span class="line">bj=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=Q;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v,t;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;t);</span><br><span class="line">u+=<span class="number">1</span>,v+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(Ti[bj]&lt;=t&amp;&amp;bj&lt;=n)vis[bj]=<span class="literal">true</span>,floyd(bj),bj++;</span><br><span class="line"><span class="keyword">if</span>(vis[u]==<span class="literal">false</span>||vis[v]==<span class="literal">false</span>)&#123;<span class="built_in">printf</span>(<span class="string">"-1\n"</span>);<span class="keyword">continue</span>; &#125;</span><br><span class="line"><span class="keyword">if</span>(f[u][v]==<span class="number">99999999</span>)&#123;<span class="built_in">printf</span>(<span class="string">"-1\n"</span>);<span class="keyword">continue</span>; &#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[u][v]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> floyd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P1776 宝物筛选 题解</title>
      <link href="/2019/09/03/P1776/"/>
      <url>/2019/09/03/P1776/</url>
      
        <content type="html"><![CDATA[<h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>终于，破解了千年的难题。小FF找到了王室的宝物室，里面堆满了无数价值连城的宝物……这下小FF可发财了，嘎嘎。但是这里的宝物实在是太多了，小FF的采集车似乎装不下那么多宝物。看来小FF只能含泪舍弃其中的一部分宝物了……小FF对洞穴里的宝物进行了整理，他发现每样宝物都有一件或者多件。他粗略估算了下每样宝物的价值，之后开始了宝物筛选工作：小FF有一个最大载重为W的采集车，洞穴里总共有n种宝物，每种宝物的价值为v[i]，重量为w[i]，每种宝物有m[i]件。小FF希望在采集车不超载的前提下，选择一些宝物装进采集车，使得它们的价值和最大。</p><h5 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h5><p>第一行为一个整数N和w，分别表示宝物种数和采集车的最大载重。</p><p>接下来n行每行三个整数，其中第i行第一个数表示第i类品价值，第二个整数表示一件该类物品的重量，第三个整数为该类物品数量。</p><h5 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h5><p>输出仅一个整数ans，表示在采集车不超载的情况下收集的宝物的最大价值。</p><a id="more"></a><h5 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h5><p>4 20<br>3 9 3<br>5 9 1<br>9 4 2<br>8 1 3</p><h5 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h5><p>47</p><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>很裸的二进制拆分多重背包，拆分成能表示所有物品组合的物品即可。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1000005</span>;</span><br><span class="line"><span class="keyword">int</span> n,maxv,ans,sz,v[maxn],val[maxn],dp[maxn],tot;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;maxv);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> w,b,c;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;w,&amp;b,&amp;c);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;j&lt;&lt;=<span class="number">1</span>)val[++tot]=w*j,v[tot]=b*j,c-=j;</span><br><span class="line"><span class="keyword">if</span>(c)val[++tot]=w*c,v[tot]=b*c;</span><br><span class="line">&#125;</span><br><span class="line">dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=maxv;j&gt;=v[i];j--)&#123;</span><br><span class="line">dp[j]=max(dp[j],dp[j-v[i]]+val[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=maxv;i++)ans=max(ans,dp[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多重背包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hdu5172GTY&#39;s Gayfriends 题解</title>
      <link href="/2019/09/02/hdu5172/"/>
      <url>/2019/09/02/hdu5172/</url>
      
        <content type="html"><![CDATA[<h4 id="Problem-Description-问题描述"><a href="#Problem-Description-问题描述" class="headerlink" title="Problem Description 问题描述"></a>Problem Description 问题描述</h4><p>GTY has $n$ gay friends. To manage them conveniently, every morning he ordered all his gay friends to stand in a line. Every gay friend has a characteristic value $a_i$ , to express how manly or how girlish he is. You, as GTY’s assistant, have to answer GTY’s queries. In each of GTY’s queries, GTY will give you a range$ [l,r]$ . Because of GTY’s strange hobbies, he wants there is a permutation $[1..r−l+1]$ in $[l,r]$. You need to let him know if there is such a permutation or not.</p><h4 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h4><p>Multi test cases (about 3) . The first line contains two integers n and m ($ 1≤n,m≤1000000$ ), indicating the number of GTY’s gay friends and the number of GTY’s queries. the second line contains n numbers seperated by spaces. The $i^{th}$ number ai ( 1≤$a_i$≤n ) indicates GTY’s ith gay friend’s characteristic value. The next m lines describe GTY’s queries. In each line there are two numbers l and r seperated by spaces ( $1≤l≤r≤n$ ), indicating the query range.</p><h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><p>For each query, if there is a permutation$ [1..r−l+1]$ in $[l,r]$, print ‘YES’, else print ‘NO’.</p><a id="more"></a><h4 id="Sample-Input-样例输入"><a href="#Sample-Input-样例输入" class="headerlink" title="Sample Input 样例输入"></a>Sample Input 样例输入</h4><p>8 5<br>2 1 3 4 5 2 3 1<br>1 3<br>1 1<br>2 2<br>4 8<br>1 5<br>3 2<br>1 1 1<br>1 1<br>1 2</p><h4 id="Sample-Output-样例输出"><a href="#Sample-Output-样例输出" class="headerlink" title="Sample Output 样例输出"></a>Sample Output 样例输出</h4><p>YES<br>NO<br>YES<br>YES<br>YES<br>YES<br>NO</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>这道题要求给出的区间是否是$[1,r-l+1]$的一个全排列，那么首先我们求一下是否对应和与原排列对应和相同。</p><p>然后的话就是看是否有重复的数出现，我们对于原数组每一个数$a_i$都记录一下其相同的值上次出现的位置，然后对这个位置开一颗维护$max$的线段树，然后查询区间内出现过的值是否上次出现位置都在$l$之前即可.</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2000015</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,sz[maxn],lxt[maxn],pos[maxn];</span><br><span class="line"><span class="keyword">int</span> val[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">val[p]=max(val[p&lt;&lt;<span class="number">1</span>],val[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">val[p]=pos[l];<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">pushup(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> now)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l&amp;&amp;R&gt;=r)<span class="keyword">return</span> val[now] ;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>,mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid)res=max(res,ask(L,R,l,mid,now&lt;&lt;<span class="number">1</span>));</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid)res=max(res,ask(L,R,mid+<span class="number">1</span>,r,now&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="built_in">memset</span>(lxt,<span class="number">0</span>,<span class="keyword">sizeof</span>(lxt));</span><br><span class="line"><span class="built_in">memset</span>(val,<span class="number">0</span>,<span class="keyword">sizeof</span>(val));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]),sum[i]=sum[i<span class="number">-1</span>]+sz[i],pos[i]=lxt[sz[i]],lxt[sz[i]]=i;</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);</span><br><span class="line"><span class="keyword">if</span>((sum[r]-sum[l<span class="number">-1</span>])!=(<span class="number">1L</span>L*(r-l+<span class="number">2</span>)*(r-l+<span class="number">1</span>))/<span class="number">2</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ask(l,r,<span class="number">1</span>,n,<span class="number">1</span>)&lt;l)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 线段树 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>牛客暑期noip提高组模拟(五) 解题报告</title>
      <link href="/2019/08/24/nowcoder5/"/>
      <url>/2019/08/24/nowcoder5/</url>
      
        <content type="html"><![CDATA[<h4 id="A-deco的abs"><a href="#A-deco的abs" class="headerlink" title="A deco的abs"></a>A deco的abs</h4><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>设$delta_i==sz_i-sz_{i-1}$,那么对于任意的$delta_i$很明显我们可以对其加上任意大小的$d$使其绝对值最小,并且由于其他所有数操作次数都是无限的,所以可以任意修改不影响相对大小关系，然后不断取最小值即可。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,d,sz[<span class="number">10000005</span>],delta[<span class="number">10000005</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;d);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)   <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]),delta[i]=sz[i]-sz[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(delta[i]&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> pre=delta[i]%d;</span><br><span class="line">            delta[i]%=d,delta[i]+=d;</span><br><span class="line">            ans+=min(<span class="built_in">abs</span>(pre),delta[i]);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(delta[i]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> pre=delta[i]%d;</span><br><span class="line">            delta[i]%=d,delta[i]-=d;</span><br><span class="line">            ans+=min(<span class="built_in">abs</span>(delta[i]),pre);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(delta[i]==<span class="number">0</span>)   <span class="keyword">continue</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="deco的gcd"><a href="#deco的gcd" class="headerlink" title="deco的gcd"></a>deco的gcd</h4><h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><p>考虑最大公约数的原理，对于任意两个数$x$,$y$，以及一个公因数$p$(质数),那么这个质数对于gcd有贡献的部分肯定是这两个数所拥有的最小幂次。所以可以预处理出每一个数的最小的质因数的幂次，然后不断除，用欧拉降幂计算答案贡献即可。</p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">998244353</span>,maxn=<span class="number">1000000</span>;</span><br><span class="line"><span class="keyword">int</span> cs[maxn][<span class="number">24</span>],cnt,pri[maxn],ycl[<span class="number">10000005</span>],n,sz[<span class="number">1000015</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">1000015</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>&#123;</span><br><span class="line">    vis[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=maxn;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!vis[i]) pri[++cnt]=i,ycl[i]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;i*pri[j]&lt;=maxn&amp;&amp;j&lt;=cnt;j++)&#123;</span><br><span class="line">            vis[i*pri[j]]=<span class="literal">true</span>,ycl[i*pri[j]]=pri[j];</span><br><span class="line">            <span class="keyword">if</span>(i%pri[j]==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>, base = a;</span><br><span class="line">    <span class="keyword">while</span>(b &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(b &amp; <span class="number">1</span>)</span><br><span class="line">            res = <span class="number">1L</span>L*res*base%mod;</span><br><span class="line">        base=<span class="number">1L</span>L*base*base%mod;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//  freopen("test.txt","r",stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    prime();</span><br><span class="line">    ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sz[i]);</span><br><span class="line">        <span class="keyword">while</span>(sz[i]&gt;<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmp=ycl[sz[i]],tot=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(sz[i]%tmp==<span class="number">0</span>) sz[i]/=tmp,cs[tmp][++tot]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">18</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmp=cs[pri[i]][j];</span><br><span class="line">            <span class="keyword">if</span>(tmp&lt;=<span class="number">1</span>)   <span class="keyword">break</span>;</span><br><span class="line">            (sum+=<span class="number">1L</span>L*tmp*(tmp<span class="number">-1</span>)/<span class="number">2</span>%(mod<span class="number">-1</span>))%=(mod<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        (ans*=(<span class="number">1L</span>L*qpow(pri[i],sum)))%=mod;</span><br><span class="line">        <span class="comment">//if(i==1) printf("%d %d %d %d\n",pri[i],sum,ans);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="deco的str"><a href="#deco的str" class="headerlink" title="deco的str"></a>deco的str</h4><h5 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h5><p>奇妙的hash。首先预处理出S的所有hash值，同时求出T的所有循环连接的hash值，然后求出前缀和，查询即可。</p><h5 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1000000007</span>,maxn=<span class="number">10000015</span>,P=<span class="number">100007</span>;</span><br><span class="line"><span class="keyword">char</span> S[<span class="number">10000005</span>],T[<span class="number">10000005</span>];</span><br><span class="line"><span class="keyword">int</span> tot,lens,lent,seed=<span class="number">131</span>;</span><br><span class="line">ull  ver[maxn],p[maxn],h[maxn],f[maxn],zz,edge[<span class="number">10000005</span>];</span><br><span class="line"><span class="keyword">int</span> Nxt[<span class="number">10000005</span>],head[<span class="number">10000005</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(ull x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> u=head[x%P];u;u=Nxt[u])&#123;</span><br><span class="line">        <span class="keyword">if</span>(ver[u]==x)   &#123;edge[u]++;<span class="keyword">return</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ver[++tot]=x,edge[tot]=<span class="number">1</span>,Nxt[tot]=head[x%P],head[x%P]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">query</span><span class="params">(ull x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> u=head[x%P];u;u=Nxt[u])    <span class="keyword">if</span>(ver[u]==x)   <span class="keyword">return</span> edge[u];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ull <span class="title">gethash</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h[R]-h[L<span class="number">-1</span>]*p[R-L+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,S+<span class="number">1</span>);lens=<span class="built_in">strlen</span>(S+<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,T+<span class="number">1</span>);lent=<span class="built_in">strlen</span>(T+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(lens&lt;lent*<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"0"</span>);<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    p[<span class="number">0</span>]=<span class="number">1</span>;<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=lens;i++)p[i]=p[i<span class="number">-1</span>]*seed;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=lens;i++)h[i]=h[i<span class="number">-1</span>]*seed+S[i]-<span class="string">'a'</span>+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=lent;i++)    zz=zz*seed+T[i]-<span class="string">'a'</span>+<span class="number">1</span>;</span><br><span class="line">    insert(zz);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=lent;i++)zz=(zz-(T[i]-<span class="string">'a'</span>+<span class="number">1</span>)*p[lent<span class="number">-1</span>])*seed+T[i]-<span class="string">'a'</span>+<span class="number">1</span>,insert(zz);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=lent;i&lt;=lens;i++) f[i]=query(h[i]-h[i-lent]*p[lent]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=lent*<span class="number">2</span>;i&lt;=lens;i++)&#123;</span><br><span class="line">        ans=(ans+<span class="number">1L</span>L*f[i]*f[i-lent]%mod)%mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 解题报告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数论 </tag>
            
            <tag> 模拟 </tag>
            
            <tag> hash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>牛客暑期noip提高组模拟(四) 解题报告</title>
      <link href="/2019/08/22/nowcoder4/"/>
      <url>/2019/08/22/nowcoder4/</url>
      
        <content type="html"><![CDATA[<h4 id="A-麻将"><a href="#A-麻将" class="headerlink" title="A 麻将"></a>A 麻将</h4><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>因为可以交换无数次，所以可以枚举行数和右端点。</p><p>问题就转化为了类似广告牌问题。</p><p>开一个前缀和记录$sum_j$表示j为右端点的连续1的个数.</p><p>然后开一个桶，记录长度，更新答案即可。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> ans,n,m,tmp,jz[<span class="number">5005</span>][<span class="number">5005</span>],sum[<span class="number">5005</span>],tong[<span class="number">5005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//  freopen("test.txt","r",stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;jz[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(jz[j][i]==<span class="number">1</span>) sum[j]=sum[j]+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> sum[j]=<span class="number">0</span>;</span><br><span class="line">            tong[sum[j]]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> tj=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=m;j&gt;=<span class="number">1</span>;j--)&#123;</span><br><span class="line">            tj+=tong[j],ans=max(ans,j*tj),tong[j]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="B-卖羊驼"><a href="#B-卖羊驼" class="headerlink" title="B 卖羊驼"></a>B 卖羊驼</h4><h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><p><del>很明显</del>是一个四边形不等式优化。</p><p>首先考虑$O(n^3)$暴力，设$dp_{k,i}$为分了k组，右端点为$i$时的写出转移方程就是$dp_{k,i}=max{dp_{k-1,j}+sum_{j+1,i}}$,其中$sum_{j+1,i}$表示的是从$j+1$到$i$所有数异或起来的值，直接n方预处理一下就好了。</p><p>然后考虑优化，可以根据四边形不等式的其他分组题（？）来得出这道题的优化方式：一定是从${k-1,i}$到${k,i+1}$中找决策点。然后记录决策点即可。</p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> sum[<span class="number">5005</span>][<span class="number">5005</span>],ans,n,zu,p[<span class="number">5005</span>],s[<span class="number">1005</span>][<span class="number">5005</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[<span class="number">1005</span>][<span class="number">5005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("test.txt","r",stdin);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;zu);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;p[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;j++)&#123;</span><br><span class="line">sum[j][i]=sum[j][i<span class="number">-1</span>]|p[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=zu;i++) s[i][n+<span class="number">1</span>]=n<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=zu;k++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=s[k<span class="number">-1</span>][i];j&lt;=s[k][i+<span class="number">1</span>];j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(dp[k][i]&lt;dp[k<span class="number">-1</span>][j]+sum[j+<span class="number">1</span>][i])&#123;</span><br><span class="line">dp[k][i]=dp[k<span class="number">-1</span>][j]+sum[j+<span class="number">1</span>][i];</span><br><span class="line">s[k][i]=j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld"</span>,dp[zu][n]);</span><br><span class="line"><span class="comment">//printf("%d",ans);</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="C-清新题"><a href="#C-清新题" class="headerlink" title="C 清新题"></a>C 清新题</h4><h5 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h5><p>线性基加书上启发式合并的裸题，，，然而本垃圾不会所以敲了个暴力还写挂了（丢人）。</p><p>dfs一次，回溯时合并更新答案就好了。</p><h5 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> tot,head[maxn],ver[maxn&lt;&lt;<span class="number">1</span>],ans[maxn],Nxt[maxn&lt;&lt;<span class="number">1</span>],n,m,val[maxn];</span><br><span class="line"><span class="keyword">int</span> xxj[maxn][<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> xb)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">18</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line"><span class="keyword">if</span>(u&amp;(<span class="number">1</span>&lt;&lt;i))&#123;</span><br><span class="line"><span class="keyword">if</span>(xxj[xb][i])u^=xxj[xb][i];</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">xxj[xb][i]=u;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> xb1,<span class="keyword">int</span> xb2)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">18</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!xxj[xb2][i])<span class="keyword">continue</span>;<span class="keyword">int</span> u=xxj[xb2][i];</span><br><span class="line">insert(u,xb1);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line">insert(val[u],u);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(ver[i]==fa)<span class="keyword">continue</span>;</span><br><span class="line">dfs(ver[i],u);</span><br><span class="line">merge(u,ver[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">18</span>;i&gt;=<span class="number">0</span>;i--)ans[u]=max(ans[u],ans[u]^xxj[u][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("test.txt","r",stdin);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);add(u,v);add(v,u);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;val[i]);</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> q;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[q]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 解题报告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线性基 </tag>
            
            <tag> 玄学 </tag>
            
            <tag> 四边形不等式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>牛客暑期noip提高组模拟(二) 解题报告</title>
      <link href="/2019/08/20/nowcoder2/"/>
      <url>/2019/08/20/nowcoder2/</url>
      
        <content type="html"><![CDATA[<h4 id="A-ACGT"><a href="#A-ACGT" class="headerlink" title="A ACGT"></a>A ACGT</h4><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>没啥好说的,直接上trie树暴力匹配即可。注意由于每个序列只能选一次所以最后ans除以2.</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> cnt,n,ans,len[<span class="number">100005</span>],sum[<span class="number">100005</span>*<span class="number">20</span>],trie[<span class="number">100005</span>*<span class="number">20</span>][<span class="number">5</span>];</span><br><span class="line"><span class="keyword">char</span> sr[<span class="number">100005</span>][<span class="number">25</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getid</span><span class="params">(<span class="keyword">char</span> ch)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(ch==<span class="string">'A'</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'T'</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'G'</span>) <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'C'</span>)    <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">deal</span><span class="params">(<span class="keyword">char</span> ch)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(ch==<span class="string">'A'</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'T'</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'G'</span>) <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ch==<span class="string">'C'</span>) <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> now=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len[x];i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp=getid(sr[x][i]);</span><br><span class="line">        <span class="keyword">if</span>(!trie[now][tmp]) trie[now][tmp]=++cnt;</span><br><span class="line">        now=trie[now][tmp];</span><br><span class="line">    &#125;</span><br><span class="line">    sum[now]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> now=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len[x];i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp=deal(sr[x][i]);</span><br><span class="line">        <span class="keyword">if</span>(!trie[now][tmp]) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> now=trie[now][tmp];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum[now])&#123;</span><br><span class="line">        sum[now]--;</span><br><span class="line">        ans++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,sr[i]+<span class="number">1</span>);</span><br><span class="line">        len[i]=<span class="built_in">strlen</span>(sr[i]+<span class="number">1</span>);</span><br><span class="line">        insert(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        query(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,ans/<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="B-幸运数字考试"><a href="#B-幸运数字考试" class="headerlink" title="B 幸运数字考试"></a>B 幸运数字考试</h4><h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><p>根据题意找出1~$10^{18}$内所有符合条件的数,预处理一下,然后由于数据范围很毒,开一下ull输入,特判如果大于18位时满足条件的数就输出十个4和7,否则直接lower_bound()查找满足条件的数.</p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line">ull T,sz[<span class="number">10000005</span>],cnt,sr;</span><br><span class="line"><span class="keyword">char</span> ch[<span class="number">55</span>];</span><br><span class="line"><span class="keyword">bool</span> fx;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,ull now,<span class="keyword">int</span> cnt4,<span class="keyword">int</span> cnt7)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(cnt4==cnt7)&#123;</span><br><span class="line">sz[++cnt]=now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt4&gt;<span class="number">10</span>||cnt7&gt;<span class="number">10</span>||pos==<span class="number">19</span>)<span class="keyword">return</span>;</span><br><span class="line">dfs(pos+<span class="number">1</span>,now*<span class="number">10L</span>L+<span class="number">4</span>,cnt4+<span class="number">1</span>,cnt7);</span><br><span class="line">dfs(pos+<span class="number">1</span>,now*<span class="number">10L</span>L+<span class="number">7</span>,cnt4,cnt7+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">4L</span>L,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">7L</span>L,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">sort(sz+<span class="number">1</span>,sz+cnt+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("test.txt","r",stdin);</span></span><br><span class="line">ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;i++)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;sr;</span><br><span class="line">ull ls=sr;</span><br><span class="line"><span class="keyword">int</span> jsq;</span><br><span class="line"><span class="keyword">while</span>(ls)&#123;</span><br><span class="line">ls=ls/<span class="number">10</span>;</span><br><span class="line">jsq++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(sr&gt;<span class="number">777777777444444444</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)<span class="built_in">cout</span>&lt;&lt;<span class="number">4</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)<span class="built_in">cout</span>&lt;&lt;<span class="number">7</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> xb=lower_bound(sz+<span class="number">1</span>,sz+cnt+<span class="number">1</span>,sr)-sz;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sz[xb]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="C滑块"><a href="#C滑块" class="headerlink" title="C滑块"></a>C滑块</h5><p>这篇题解咕了，没啥营养价值所以也不打算补（？）。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 解题报告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 模拟 </tag>
            
            <tag> trie树 </tag>
            
            <tag> 深度优先搜索 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>牛客暑期noip提高组模拟(一) 解题报告</title>
      <link href="/2019/08/19/nowcoder1/"/>
      <url>/2019/08/19/nowcoder1/</url>
      
        <content type="html"><![CDATA[<h4 id="A-最短路"><a href="#A-最短路" class="headerlink" title="A 最短路"></a>A 最短路</h4><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>很明显和最短路本身没啥关系。 把所有边的边权排个序，然后任意相邻的两条边如果边权之差大于$s$很明显就不能构造出这样的图，这时输出$-1$即可。否则直接按照顺序用双指针记录重边然后连边，思路不难。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> tot,n,s,maxv,now;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="literal">false</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> bh;</span><br><span class="line">    <span class="keyword">int</span> dis;</span><br><span class="line">&#125;sz[<span class="number">50500</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node cp1,node cp2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cp1.dis==cp2.dis)    <span class="keyword">return</span> cp1.bh&lt;cp2.bh;</span><br><span class="line">    <span class="keyword">return</span> cp1.dis&lt;cp2.dis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//  freopen("a.in","r",stdin);</span></span><br><span class="line"><span class="comment">//  freopen("test.txt","w",stdout);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmp);</span><br><span class="line">        sz[i].dis=tmp;</span><br><span class="line">        sz[i].bh=i;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(sz+<span class="number">2</span>,sz+n+<span class="number">1</span>,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sz[i].dis-sz[i<span class="number">-1</span>].dis&gt;s||sz[i].dis==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"-1"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> pre=<span class="number">0</span>,zq=<span class="number">0</span>,now=<span class="number">0</span>,bj=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sz[i].dis!=now)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,bj,sz[i].bh,sz[i].dis-now);</span><br><span class="line">            pre=bj;</span><br><span class="line">            zq=now;</span><br><span class="line">            now=sz[i].dis;</span><br><span class="line">            bj=sz[i].bh;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,pre,sz[i].bh,sz[i].dis-zq);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="B-最小生成链"><a href="#B-最小生成链" class="headerlink" title="B 最小生成链"></a>B 最小生成链</h4><h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><p>看到异或第一反应是个trie树，然而仔细一看是边权和，又觉得不可行。仔细读题，会发现枚举的事实上是所有排列当中最大异或值最小的那个，复杂度为$O(n!)$。回顾位运算和异或的性质，二进制下任意位有多个$0$且有$1$时此位才有贡献，因此从1枚举到n找出这个位（二进制意义下），然后枚举所有边，复杂度$O(n^2)$</p><p>我们发现，只有找出的那一位为1去与为0计算才会最大有贡献，因此维护一个trie树，将所有找出那一位为0的树插入，并且用为1的树查询异或值更新答案即可。</p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> tot,n,s,maxv,now;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="literal">false</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> bh;</span><br><span class="line">    <span class="keyword">int</span> dis;</span><br><span class="line">&#125;sz[<span class="number">50500</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node cp1,node cp2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cp1.dis==cp2.dis)    <span class="keyword">return</span> cp1.bh&lt;cp2.bh;</span><br><span class="line">    <span class="keyword">return</span> cp1.dis&lt;cp2.dis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//  freopen("a.in","r",stdin);</span></span><br><span class="line"><span class="comment">//  freopen("test.txt","w",stdout);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmp);</span><br><span class="line">        sz[i].dis=tmp;</span><br><span class="line">        sz[i].bh=i;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(sz+<span class="number">2</span>,sz+n+<span class="number">1</span>,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sz[i].dis-sz[i<span class="number">-1</span>].dis&gt;s||sz[i].dis==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"-1"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> pre=<span class="number">0</span>,zq=<span class="number">0</span>,now=<span class="number">0</span>,bj=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sz[i].dis!=now)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,bj,sz[i].bh,sz[i].dis-now);</span><br><span class="line">            pre=bj;</span><br><span class="line">            zq=now;</span><br><span class="line">            now=sz[i].dis;</span><br><span class="line">            bj=sz[i].bh;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,pre,sz[i].bh,sz[i].dis-zq);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="C最小字典最短路"><a href="#C最小字典最短路" class="headerlink" title="C最小字典最短路"></a>C最小字典最短路</h4><p>这篇题解在咕咕咕的路上，如果你看到了此消息请催博主补锅。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 解题报告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路 </tag>
            
            <tag> 模拟 </tag>
            
            <tag> trie树 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>poj3177Redundant Paths 题解</title>
      <link href="/2019/08/15/poj3177/"/>
      <url>/2019/08/15/poj3177/</url>
      
        <content type="html"><![CDATA[<h5 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h5><p><a href="http://poj.org/problem?id=3177" target="_blank" rel="noopener">传送门</a></p><h4 id="Description-问题描述"><a href="#Description-问题描述" class="headerlink" title="Description 问题描述"></a>Description 问题描述</h4><p>  In order to get from one of the F (1 &lt;= F &lt;= 5,000) grazing fields (which are numbered 1..F) to another field, Bessie and the rest of the herd are forced to cross near the Tree of Rotten Apples. The cows are now tired of often being forced to take a particular path and want to build some new paths so that they will always have a choice of at least two separate routes between any pair of fields. They currently have at least one route between each pair of fields and want to have at least two. Of course, they can only travel on Official Paths when they move from one field to another. </p><p>Given a description of the current set of R (F-1 &lt;= R &lt;= 10,000) paths that each connect exactly two different fields, determine the minimum number of new paths (each of which connects exactly two fields) that must be built so that there are at least two separate routes between any pair of fields. Routes are considered separate if they use none of the same paths, even if they visit the same intermediate field along the way. </p><p>There might already be more than one paths between the same pair of fields, and you may also build a new path that connects the same fields as some other path.  </p><h4 id="Input-输入"><a href="#Input-输入" class="headerlink" title="Input 输入"></a>Input 输入</h4><p>Line 1: Two space-separated integers: F and R </p><p>Lines 2..R+1: Each line contains two space-separated integers which are the fields at the endpoints of some path.  </p><h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><p>Line 1: A single integer that is the number of new paths that must be built.</p><a id="more"></a><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>7 7<br>1 2<br>2 3<br>3 4<br>2 5<br>4 5<br>5 6<br>5 7</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>2</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>题意简述：求一个无向连通图中还需加入多少条边能构成一个边双连通分量。</p><p>不太好想。假设我们把桥留下来，然后对每个双联通分量进行缩点，因为是连通图，所以就能得到一棵树。</p><p>然后对这个树进行加边操作，可以发现一个结论：需要互通的点一定构成一个环。</p><p>然后画图不严谨证明得到最后答案就是叶子节点个数除以二然后向上取整。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5005</span>,maxm=<span class="number">10005</span>;</span><br><span class="line"><span class="keyword">int</span> tu[maxn][maxn],sum,ans,bkt,dfn[maxn],col[maxn],low[maxn],tot,F,R,head[maxn],cnt,ver[maxm&lt;&lt;<span class="number">1</span>],Nxt[maxm&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"><span class="keyword">int</span> deg[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">ver[++tot]=v,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line">dfn[u]=low[u]=++cnt;</span><br><span class="line">s.push(u);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">int</span> v=ver[i];</span><br><span class="line"><span class="keyword">if</span>(v==fa)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(!dfn[v])tarjan(v,u),low[u]=min(low[u],low[v]); </span><br><span class="line"><span class="keyword">else</span> low[u]=min(low[u],dfn[v]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dfn[u]==low[u])&#123;</span><br><span class="line">bkt++;</span><br><span class="line"><span class="keyword">while</span>(s.top()!=u)col[s.top()]=bkt,s.pop();</span><br><span class="line">col[u]=bkt,s.pop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("test.txt","r",stdin);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;F,&amp;R);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=R;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</span><br><span class="line"><span class="keyword">if</span>(tu[u][v])<span class="keyword">continue</span>;</span><br><span class="line">tu[u][v]=tu[v][u]=<span class="number">1</span>;</span><br><span class="line">add(u,v);</span><br><span class="line">add(v,u);</span><br><span class="line">&#125;</span><br><span class="line">tarjan(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> u=<span class="number">1</span>;u&lt;=F;u++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])&#123;</span><br><span class="line"><span class="keyword">int</span> v=ver[i];</span><br><span class="line"><span class="keyword">if</span>(col[u]!=col[v])deg[col[u]]+=<span class="number">1</span>,deg[col[v]]+=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=bkt;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(deg[i]==<span class="number">2</span>)sum++;</span><br><span class="line">&#125;</span><br><span class="line">ans=sum/<span class="number">2</span>+sum%<span class="number">2</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 强连通分量 </tag>
            
            <tag> 缩点 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Follow.</title>
      <link href="/2019/08/14/Follow/"/>
      <url>/2019/08/14/Follow/</url>
      
        <content type="html"><![CDATA[<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="没有密码的话不用找博主了，不会有的" />    <label for="pass">没有密码的话不用找博主了，不会有的</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">U2FsdGVkX19CHiEKuxyKX5j34YhkfP80i3eKncICPaUGpfroxpKMn0n2o47sXrglFunTQD8OBnEg39EgrWNxvuEbV+eLeCrtHKdljM94/eDEa+3/IDhrY3Oa6WTAozQZiLmuCyloYxd/CdvwI/hzrShFsq0qmujfFEcPylIyopvpr+xTCK6RFzTSuOkeBLwKacZTookXZc5Wz/52RldO4vmwF+Ypn+QOmCstQS7v4Ix1VWo9JKxqo5TyqGTgPlyXzBWr+5pymXTea0KWj5MbfDlf0wh//5azAbw2gULKYwpPrffRS23m6yc3mcxliEXSrSW5EvrQTe7OU/ttA2P8FUpa6ZyHPDFpusCouWUt4ge6tQ1SzJP9bKD5buS03lQUfonZxVc8zhO4bLs2di6Ip+Mjryl2cx0PfXBZMfr9rKESzCsziinVY8s0IYQMK8SnU1PpwohWfDhcrCJ7NhauPVxSpgWylR6mX8SA51RoApxheCwZuxpHBQbFLgOSe9PnYpjNZb6bfmskuazZZQ1FqUaHvEfNDznqqR1S18+iWH1hx937+Z8oRe9aAPun31DzsH/ErB75iOazkXK56g0lQUfvBDjs5KSnUOmZ0l+yap20GdDbIrqaqqyk936bnO2ohl4NjPE7Ff9sVofg1fqWunRHJ2J9awZ2E+u8FSJ2mv3FKSfPnIZl7zYQJKgHTijDM0NCl6F6w24VKAapTyZNkiXMJU/G9MfFBEmCD3moK8ajkFT52gvSoHplivU9kGG5GOtYC2Ft1gcQMAm/t9moG1XiGwi9nolVd8avR1S9D2bq1oYvLnfNunO5MNh91gKTQHvMwL0TwNMv+xc0mjGu0hTktnud3mTK+OvJFUcl3bQinpasoVRf9g2e0lk/fQ6yP00nbwBBa/0O/nhg6ipH3FSDk6n1UsgQwQ4CezDq3KbdkKY8wzZHqzg9MZafZjxywuSMqlPwOadC31iuS6WuA8zA7rMVsnlgeZPmfa4UntMXIZJyDo/DNCv215RtrJnEEZDGZ53RWCUdX956L8U8RHbX/LmizSQtsEmmErfCrL2li5rJ6IJ9HcP88g4czKfzRYxtNV++XZt6Q+QibVBZufsAiwrvMDzhzNPalyv83rDEXsu/t0Iw0jeZwaDkeQxOhVTBP0JlDhts2KncbBQfPt4J11B17XPSfLIl43Cg6NxmQ1MyCZJuNECFnirq5aGwdq3W0I+b7RDWRXDIN5thGhLsM6SfjrrhPrAn57+W4Tc=</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 随记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hdu3046 Pleasant sheep and big big wolf 题解</title>
      <link href="/2019/08/14/hdu3046/"/>
      <url>/2019/08/14/hdu3046/</url>
      
        <content type="html"><![CDATA[<p>题目来源：</p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3046" target="_blank" rel="noopener">传送门</a></p><h4 id="Problem-Description-问题描述"><a href="#Problem-Description-问题描述" class="headerlink" title="Problem Description 问题描述"></a>Problem Description 问题描述</h4><p>In ZJNU, there is a well-known prairie. And it attracts pleasant sheep and his companions to have a holiday. Big big wolf and his families know about this, and quietly hid in the big lawn. As ZJNU ACM/ICPC team, we have an obligation to protect pleasant sheep and his companions to free from being disturbed by big big wolf. We decided to build a number of unit fence whose length is 1. Any wolf and sheep can not cross the fence. Of course, one grid can only contain an animal.<br>Now, we ask to place the minimum fences to let pleasant sheep and his Companions to free from being disturbed by big big wolf and his companions. </p><p><img src="http://acm.hdu.edu.cn/data/images/vipcon10-1007-1.JPG" alt="1"></p><h4 id="Input输入"><a href="#Input输入" class="headerlink" title="Input输入"></a><strong>Input</strong>输入</h4><p>There are many cases.<br>For every case: </p><p>N and M（N,M&lt;=200）<br>then N*M matrix:<br>0 is empty, and 1 is pleasant sheep and his companions, 2 is big big wolf and his companions.</p><h4 id="Output输出"><a href="#Output输出" class="headerlink" title="Output输出"></a><strong>Output</strong>输出</h4><p>For every case:</p><p>First line output “Case p:”, p is the p-th case;<br>The second line is the answer. </p><a id="more"></a><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>4 6<br>1 0 0 1 0 0<br>0 1 1 0 0 0<br>2 0 0 0 0 0<br>0 2 0 1 1 0</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>Case 1:<br>4</p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>题目大意：在一个$(n,m)$的矩阵上，1代表羊，2代表狼，0代表平地，我们有长度为1的一个栅栏（不是放在格子上的，是放在格子和格子之间的空隙上的），问使用最少的栅栏，能够使得狼吃不到羊。(N,M&lt;200)；</p><p>建模还是很好想：狼吃不到羊-&gt;不连通-&gt;最小割-&gt;最大流。</p><p>然后考虑连边：要求栅栏数，那么很明显所有相邻的地皮要连流量为1的边（双向），然后建立源点$S$和汇点$T$，源点朝所有的狼连出流量为$inf$的边，所有的羊朝汇点也连上流量为$inf$的边。</p><p>然后跑最大流就可以了，记住每组数据运行前的初始化。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 999999999</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1000005</span>;</span><br><span class="line"><span class="keyword">int</span> cnt,s,t,n,m,tot,dep[maxn],head[maxn],ver[maxn],edge[maxn],Nxt[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">    ver[++tot]=v,edge[tot]=l,Nxt[tot]=head[u],head[u]=tot;</span><br><span class="line">    ver[++tot]=u,edge[tot]=<span class="number">0</span>,Nxt[tot]=head[v],head[v]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">deal</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> flow)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u==t) <span class="keyword">return</span> flow;</span><br><span class="line">    <span class="keyword">int</span> res = flow;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u]; i ;i=Nxt[i])&#123;</span><br><span class="line">        <span class="keyword">if</span>(edge[i]&amp;&amp;dep[ver[i]]==dep[u]+<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmp=deal(ver[i],min(edge[i],res));</span><br><span class="line">            edge[i]-=tmp,edge[i^<span class="number">1</span>]+=tmp,res-=tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flow-res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">divdep</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dep,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dep));</span><br><span class="line">    <span class="keyword">while</span>(!q.empty())    q.pop();</span><br><span class="line">    q.push(s);</span><br><span class="line">    dep[s]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">        <span class="keyword">int</span> u=q.front();q.pop();</span><br><span class="line">        <span class="keyword">if</span>(u==t)    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[u];i;i=Nxt[i])</span><br><span class="line">            <span class="keyword">if</span>(edge[i]&amp;&amp;dep[ver[i]]==<span class="number">-1</span>)    dep[ver[i]]=dep[u]+<span class="number">1</span>,q.push(ver[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    tot=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> xh=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)==<span class="number">2</span>)&#123;</span><br><span class="line">        xh++;</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        s=<span class="number">0</span>,t=n*m+<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">        cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">                <span class="keyword">int</span> tmp;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmp);        </span><br><span class="line">                cnt++;</span><br><span class="line">                <span class="keyword">if</span>(i&lt;n) add(cnt,cnt+m,<span class="number">1</span>),add(cnt+m,cnt,<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(j&lt;m) add(cnt,cnt+<span class="number">1</span>,<span class="number">1</span>),add(cnt+<span class="number">1</span>,cnt,<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(tmp==<span class="number">2</span>)    add(cnt,s,inf),add(s,cnt,inf);</span><br><span class="line">                <span class="keyword">if</span>(tmp==<span class="number">1</span>)    add(cnt,t,inf),add(t,cnt,inf);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(divdep())&#123;</span><br><span class="line">            ans+=deal(s,INT_MAX);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n%d\n"</span>,xh,ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络流 </tag>
            
            <tag> 最大流最小割 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络流学习笔记（一）</title>
      <link href="/2019/08/13/%E7%BD%91%E7%BB%9C%E6%B5%81%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2019/08/13/%E7%BD%91%E7%BB%9C%E6%B5%81%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="网络流学习笔记（一）"><a href="#网络流学习笔记（一）" class="headerlink" title="网络流学习笔记（一）"></a>网络流学习笔记（一）</h1><p>（未完待续）</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>网络流(network-flows)是一种类比水流的解决问题方法，与线性规划密切相关。在oi中网络流是非常重要的考点。</p><a id="more"></a><h3 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h3><p>网络是指一个有向图$G=(V,E)$.其中的每一条边$(u,v)\in E$都有一个权值$c(u,v)$,称之为容量，当$(u,v)\notin G$ 时,$c(u,v)=0$.</p><h3 id="流"><a href="#流" class="headerlink" title="流"></a>流</h3><script type="math/tex; mode=display">f(u,v)=\left\{\begin{split} &f(u,v)&,(u,v)\in E\\ &-f(v,u)&,(v,u)\in E\\ &0&,(u,v)\notin E,(v,u)\notin E \end{split}\right.</script><h2 id="最大流问题"><a href="#最大流问题" class="headerlink" title="最大流问题"></a>最大流问题</h2><p>给定一个有向图$G=(V,E)$，把图中的边看作管道，每条边上有一个权值，表示该管道的流量上限。给定源点$s$和汇点$t$，现在假设在$s$处有一个水源，$t$处有一个蓄水池，问从$s$到$t$的最大水流量是多少</p><p><img src="https://miao.su/images/2019/08/13/15dfe7.png" alt="如图"></p><h2 id="Ford-Fulkerson算法"><a href="#Ford-Fulkerson算法" class="headerlink" title="Ford-Fulkerson算法"></a>Ford-Fulkerson算法</h2><p>基本思路很简单,每次用dfs从源到汇找一条可行路径，<br>然后把这条路塞满。这条路径上容量最小的那条边的容量，就是这次dfs所找到的流量。然后对于路径上的每条边，其容量要减去刚才找到的流量。并对反向边加上相同的流量 。</p><h2 id="Edmonds-Karp算法"><a href="#Edmonds-Karp算法" class="headerlink" title="Edmonds-Karp算法"></a>Edmonds-Karp算法</h2><h2 id="Dicnic算法"><a href="#Dicnic算法" class="headerlink" title="Dicnic算法"></a>Dicnic算法</h2>]]></content>
      
      
      <categories>
          
          <category> 算法笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>搬迁公告</title>
      <link href="/2019/08/12/%E6%90%AC%E8%BF%81%E5%85%AC%E5%91%8A/"/>
      <url>/2019/08/12/%E6%90%AC%E8%BF%81%E5%85%AC%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p>由于不可抗因素，全站已搬迁，以前的内容只有明文数据储存，会慢慢补上的</p><p>在此祝嘉兴职业技术学院的彭洁伟大佐亲妈暴毙。</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
